/*!CK:333292773!*//*1386688608,178186555*/

if (self.CavalryLogger) { CavalryLogger.start_js(["VUqmK"]); }

__d("MultiInferenceMegaphone",["AsyncRequest","CSS","DOM","DOMClone","Event","csx","cx","$"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('CSS'),i=b('DOM'),j=b('DOMClone'),k=b('Event'),l=b('csx'),m=b('cx'),n=b('$'),o={init:function(p,q,r,s){this._checkedImage=r;this._disableBlock=s;p.forEach(function(t){k.listen(t,'click',function(u){var v=u.target,w=i.scry(v,"^._52bq").pop();if(w||h.hasClass(v,"_52bq"))return;this._setChecked(t);this._disableMP();var x=q[t.id];if(x)new g(x).setMethod('POST').setStatusElement('typeahead_load_indicator').send();}.bind(this));}.bind(this));},initTypeahead:function(p,q,r,s,t){this._typeaheadBlock=p;this._typeaheadInput=i.scry(p,'input[name="'+t+'"]').pop();k.listen(p,'click',function(u){this._setTypeaheadFocus();}.bind(this));q.subscribe('select',function(u,v){var w=v.selected;if(!w||!(w.uid||w.text))return;this._setChecked(this._typeaheadBlock);this._disableMP();var x={};if(w.uid)x[s]=w.uid;if(w.text)x[t]=w.text;new g(r).setMethod('POST').setData(x).setStatusElement('typeahead_load_indicator').send();}.bind(this));},_disableMP:function(){var p=n('nf_megaphone_school_add_content');if(p)i.appendContent(p,this._disableBlock);},_setTypeaheadFocus:function(){if(!this._typeaheadInput)return;this._typeaheadInput.focus();},_setChecked:function(p){if(!p)return;var q=i.scry(p,"._51w4").pop();if(q)i.replace(q,j.deepClone(this._checkedImage));}};e.exports=o;});
__d("legacy:window-comm",["WindowComm"],function(a,b,c,d){a.WindowComm=b('WindowComm');},3);