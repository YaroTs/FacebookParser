/*!CK:3534599949!*//*1386743778,178185015*/

if (self.CavalryLogger) { CavalryLogger.start_js(["MAjCC"]); }

__d("BlackbirdUpsellConstants",[],function(a,b,c,d,e,f){e.exports={ACTION_UPSELL:"upsell",CLICK_TYPE_DISMISS_PROMO:"dismiss_promo",ACTION_EDUCATE:"educate",CLICK_TYPE_ENABLE_CHAT:"enable_chat",CLICK_TYPE_OPEN_SETTINGS:"open_settings"};});
__d("AsyncLoader",["copyProperties","AsyncRequest","BaseAsyncLoader"],function(a,b,c,d,e,f){var g=b('copyProperties'),h=b('AsyncRequest'),i=b('BaseAsyncLoader');function j(k,l){this._endpoint=k;this._type=l;}g(j.prototype,i.prototype);j.prototype.send=function(k,l,m,n,o){new h(k).setData({ids:l}).setHandler(n).setErrorHandler(o).setAllowCrossPageTransition(true).setMethod('GET').setReadOnly(true).send();};e.exports=j;});
__d("SystemEvents",["Arbiter","CurrentUser","ErrorUtils","UserAgent","copyProperties"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('CurrentUser'),i=b('ErrorUtils'),j=b('UserAgent'),k=b('copyProperties'),l=new g(),m=[],n=1000;setInterval(function(){for(var w=0;w<m.length;w++)m[w]();},n,false);function o(){return (/c_user=(\d+)/.test(document.cookie)&&RegExp.$1)||0;}var p=h.getID(),q=navigator.onLine;function r(){if(!q){q=true;l.inform(l.ONLINE,q);}}function s(){if(q){q=false;l.inform(l.ONLINE,q);}}if(j.ie()){if(j.ie()>=11){window.addEventListener('online',r,false);window.addEventListener('offline',s,false);}else if(j.ie()>=8){window.attachEvent('onload',function(){document.body.ononline=r;document.body.onoffline=s;});}else m.push(function(){(navigator.onLine?r:s)();});}else if(window.addEventListener)if(!j.chrome()){window.addEventListener('online',r,false);window.addEventListener('offline',s,false);}var t=p;m.push(function(){var w=o();if(t!=w){l.inform(l.USER,w);t=w;}});var u=Date.now();function v(){var w=Date.now(),x=w-u,y=x<0||x>10000;u=w;if(y)l.inform(l.TIME_TRAVEL,x);return y;}m.push(v);m.push(function(){if(window.onerror!=i.onerror)window.onerror=i.onerror;});k(l,{USER:'SystemEvents/USER',ONLINE:'SystemEvents/ONLINE',TIME_TRAVEL:'SystemEvents/TIME_TRAVEL',isPageOwner:function(w){return (w||o())==p;},isOnline:function(){return j.chrome()||q;},checkTimeTravel:v});e.exports=l;});
__d("ChannelSubdomain",["Cookie","JSLogger"],function(a,b,c,d,e,f){var g=b('Cookie'),h=b('JSLogger'),i=h.create('channel'),j=7,k=null;function l(o,p){var q=null,r=m(),s;o--;var t=Math.min(32,j*o);t=Math.max(t,1);var u=false;for(var v=0;v<32;v++){s=(v+p)%t;if(!(r&(1<<s))){u=true;break;}}if(u){k=s;q=k%j;g.set('sub',r|(1<<k));}else{k=-1;q=null;i.error('subdomain_overflow',{slot:k,max:o});}return q;}function m(){var o=g.get('sub')||0;o=parseInt(o,10);return isNaN(o)?0:o;}function n(){if(k!==null&&k>=0){var o=m()&~(1<<k);if(o){g.set('sub',o);}else g.clear('sub');}}e.exports={allocate:l,clear:n};});
__d("ChannelTransport",["copyProperties","bind","AjaxRequest","URI","JSLogger","DocRPC","ChannelConstants","UserAgent","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f){var g=b('copyProperties'),h=b('bind'),i=b('AjaxRequest'),j=b('URI'),k=b('JSLogger'),l=b('DocRPC'),m=b('ChannelConstants'),n=b('UserAgent'),o=b('setTimeoutAcrossTransitions'),p=k.create('channel');function q(){return (1048576*Math.random()|0).toString(36);}function r(z,aa){var ba=z.subdomain;ba=ba===null?'':(ba+'-');var ca=new j(aa).setDomain(ba+z.host+'.facebook.com').setPort(z.port).setSecure(j().isSecure());return ca;}function s(z){var aa={partition:z.partition,cb:q()},ba=r(z,'/p').setQueryData(aa);p.log('start_p',{uri:ba.toString()});var ca=new i('GET',ba);if(i.supportsCORS())ca.xhr.withCredentials=true;var da=function(ea){p.log('finish_p',{xhr:ea.toJSON?ea.toJSON():ea});};ca.timeout=z.P_TIMEOUT;ca.onError=ca.onSuccess=da;ca.send();}function t(z,aa,ba){var ca=new Image(),da=0,ea=function(ha){ca.abort();return ha?aa():ba();};ca.onload=function(){p.log('ping_ok',{duration:Date.now()-da});ea(true);};ca.onerror=function(){s(z);ea(false);};var fa=o(ca.onerror,10000);ca.abort=function(){if(fa){clearTimeout(fa);fa=null;}ca.onload=ca.onerror=null;};var ga={partition:z.partition,cb:q()};da=Date.now();ca.src=r(z,'/ping').setQueryData(ga);return ca;}function u(z,aa,ba,ca){var da=new Date(),ea=-1;if(z.userActive>0){ea=(da-z.userActive)/1000|0;if(ea<0)p.warn('idle_regression',{idleTime:ea,now:da.getTime(),userActive:z.userActive});}var fa={channel:z.user_channel,seq:z.seq,partition:z.partition,clientid:z.sessionID,cb:q(),idle:ea,cap:0};if(z.userActive>0&&ea<60)fa.state='active';if(z.streamingCapable){fa.mode='stream';fa.format='json';}if(z.profile)fa.profile=z.profile;if(z.webrtcSupport&&(n.chrome()>=24||n.firefox()>=22))fa.cap=m.CAPABILITY_VOIP;var ga=r(z,'/pull').setQueryData(fa),ha=new i('GET',ga);if(i.supportsCORS())ha.xhr.withCredentials=true;ha.timeout=z.streamingCapable?z.STREAMING_TIMEOUT:z.LONGPOLL_TIMEOUT;ha.onJSON=aa;ha.onSuccess=ba;ha.onError=function(){var ia=(this.status==12002&&this._time>=z.MIN_12002_TIMEOUT)||(this.status==504&&this._time>=z.MIN_504_TIMEOUT),ja=ia?ba:ca;return ja&&ja.apply(this,arguments);};ha.send();z.inStreaming=z.streamingCapable;return ha;}function v(z){this.manager=z;(this.init&&this.init());}function w(z){v.apply(this,arguments);}g(w.prototype,{logName:'CORS',enterState:function(z,aa){if(this._request){this._request.abort();this._request=null;}if(z=='init')o(h(this.manager,'exitState',{status:m.OK,stateId:aa.stateId}),3000);if(!/pull|ping/.test(z))return;var ba=this.manager;if(z=='ping'){this._request=t(aa,h(ba,'exitState',{status:m.OK,stateId:aa.stateId}),h(ba,'exitState',{status:m.ERROR,stateId:aa.stateId}));}else if(z=='pull')this._request=u(aa,h(ba,'_processTransportData',aa.stateId),h(ba,'exitState',{status:m.OK,stateId:aa.stateId}),h(ba,'exitState',{status:m.ERROR,stateId:aa.stateId}));}});function x(z){p.log('iframe_init_constructor');v.apply(this,arguments);this._iframe=document.createElement('iframe');this._iframe.style.display='none';document.body.appendChild(this._iframe);l.publish(this,'outerTransport');}g(x.prototype,{logName:'iframe',_initIframe:function(z){p.log('iframe_init_start');window.onchanneliframeready=function(){p.log('iframe_resources');return z.resources;};window.onchanneliframeloaded=function(){p.log('iframe_loaded');};if(z){this._iframeURI=r(z,z.path);if(z.bustIframe){var aa={partition:z.partition,cb:q()};this._iframeURI.setQueryData(aa);}}else this._iframeURI='about:blank';this._iframeProxy=null;try{this._iframe.contentWindow.location.replace(this._iframeURI);p.log('iframe_uri_set');}catch(ba){p.error('iframe_uri_set_error',ba);this.exitState({status:m.ERROR,stateId:z.stateId},ba+'');}},enterState:function(z,aa){if(z=='init'){this._initIframe(aa);}else if(/idle|ping|pull/.test(z)){if(this._iframeProxy){this._iframeProxy.enterState.apply(this._iframeProxy,arguments);}else if(z!='idle')this.exitState({status:m.ERROR,stateId:aa.stateId},'iframe not yet loaded');}else if(z=='shutdown')this._initIframe();},_processTransportData:function(){this.manager._processTransportData.apply(this.manager,arguments);},exitState:function(z){if(this.manager.state=='init'&&z.status==m.OK)this._iframeProxy=l.proxy(this._iframe.contentWindow,'innerTransport',['enterState'],(this._iframeURI+'').replace(/iframe.*/,''));if(/ping|pull/.test(this.manager.state)&&!this._iframeProxy)return;this.manager.exitState.apply(this.manager,arguments);}});function y(){this.init=this.init.bind(this);v.apply(this,arguments);}g(y.prototype,{logName:'iframe(inner)',init:function(){l.publish(this,'innerTransport');try{var aa=l.proxy(window.parent,'outerTransport',['_processTransportData','exitState'],top.DocRPC.origin);g(this,aa);this.exitState({status:m.OK,stateId:1e+06});}catch(z){p.error('iframe_inner_init_error',z);}},enterState:function(z,aa){if(this._request){this._request.abort();this._request=null;}if(z=='ping'){this._request=t(aa,h(this,'exitState',{status:m.OK,stateId:aa.stateId}),h(this,'exitState',{status:m.ERROR,stateId:aa.stateId}));}else if(z=='pull')this._request=u(aa,h(this,'_processTransportData',aa.stateId),h(this,'exitState',{status:m.OK,stateId:aa.stateId}),h(this,'exitState',{status:m.ERROR,stateId:aa.stateId}));}});e.exports={getURI:r,Transport:v,CORSTransport:w,IframeTransport:x,IframeInnerTransport:y};});
__d("PresencePrivacy",["Arbiter","AsyncRequest","ChannelConstants","CurrentUser","PresencePrivacyInitialData","JSLogger","PresenceUtil","copyProperties"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('AsyncRequest'),i=b('ChannelConstants'),j=b('CurrentUser'),k=b('PresencePrivacyInitialData'),l=b('JSLogger'),m=b('PresenceUtil'),n=b('copyProperties'),o='/ajax/chat/privacy/settings.php',p='/ajax/chat/privacy/online_policy.php',q='/ajax/chat/privacy/visibility.php',r='friend_visibility',s='visibility',t='online_policy',u=n({},k.privacyData),v=k.visibility,w=n({},k.privacyData),x=v,y=k.onlinePolicy,z=y,aa=[],ba=false;function ca(){return l.create('blackbird');}var da=n(new g(),{WHITELISTED:1,BLACKLISTED:-1,UNLISTED:0,ONLINE:1,OFFLINE:0,ONLINE_TO_WHITELIST:0,ONLINE_TO_BLACKLIST:1});function ea(qa){var ra;for(ra in qa){var sa=qa[ra];if(ra==j.getID()){ca().error('set_viewer_visibility');throw new Error("Invalid to set current user's visibility");}switch(sa){case da.WHITELISTED:case da.BLACKLISTED:case da.UNLISTED:break;default:ca().error('set_invalid_friend_visibility',{id:ra,value:sa});throw new Error("Invalid state: "+sa);}}for(ra in qa)u[ra]=qa[ra];da.inform('privacy-changed');}function fa(qa,ra){var sa={};sa[qa]=ra;ea(sa);}function ga(qa){switch(qa){case da.ONLINE:case da.OFFLINE:break;default:ca().error('set_invalid_visibility',{value:qa});throw new Error("Invalid visibility: "+qa);}v=qa;da.inform('privacy-changed');da.inform('privacy-user-presence-changed');g.inform('chat/visibility-changed',{sender:this});}function ha(qa){switch(qa){case da.ONLINE_TO_WHITELIST:case da.ONLINE_TO_BLACKLIST:break;default:throw new Error("Invalid default online policy: "+qa);}y=qa;da.inform('privacy-user-presence-changed');da.inform('privacy-changed');}function ia(qa,ra){ba=true;qa.send();}function ja(qa,ra){aa.push({request:qa,data:ra});if(!ba){var sa=aa.shift();ia(sa.request,sa.data);}}function ka(qa,ra){var sa=qa.type;if(sa===r){var ta=ra.payload.user_availabilities;if(!Array.isArray(ta)){da.inform('privacy-availability-changed',{user_availabilities:ta});for(var ua in qa.settings)w[ua]=qa.settings[ua];}}else{if(sa===s){x=qa.visibility;}else if(sa===t)z=qa.online_policy;da.inform('privacy-user-presence-response');}ca().log('set_update_response',{data:qa,response:ra});}function la(qa,ra){if(v!==x)ga(x);if(y!==z)ha(z);n(u,w);da.inform('privacy-changed');aa=[];ca().log('set_error_response',{data:qa,response:ra});}function ma(qa){ba=false;if(aa.length>0){var ra=aa.shift();ia(ra.request,ra.data);}}function na(qa,ra){if(m!=null){var sa=qa.getData();sa.window_id=m.getSessionID();qa.setData(sa);}qa.setHandler(ka.bind(this,ra)).setErrorHandler(la.bind(this,ra)).setTransportErrorHandler(la.bind(this,ra)).setFinallyHandler(ma.bind(this)).setAllowCrossPageTransition(true);return qa;}function oa(qa,ra,sa){return na(new h(qa).setData(ra),sa);}function pa(qa,ra){var sa=ra.obj;if(sa.viewer_id!=j.getID()){ca().error('invalid_viewer_for_channel_message',{type:qa,data:ra});throw new Error("Viewer got from the channel is not the real viewer");}if(sa.window_id===m.getSessionID())return;var ta=sa.data;if(sa.event=='access_control_entry'){ta.target_ids.forEach(function(va){fa(va,ta.setting);w[va]=ta.setting;});}else{if(sa.event=='visibility_update'){var ua=!!ta.visibility?da.ONLINE:da.OFFLINE;ga(ua);x=ua;}else if(sa.event=='online_policy_update'){ha(ta.online_policy);z=ta.online_policy;}da.inform('privacy-user-presence-response');}ca().log('channel_message_received',{data:ra.obj});}n(da,{WHITELISTED:1,BLACKLISTED:-1,UNLISTED:0,ONLINE:1,OFFLINE:0,ONLINE_TO_WHITELIST:0,ONLINE_TO_BLACKLIST:1,init:function(qa,ra,sa){},setVisibility:function(qa){x=v;ga(qa);var ra={visibility:qa},sa={type:s,visibility:qa},ta=oa(q,ra,sa);ja(ta,sa);ca().log('set_visibility',{data:ra});return qa;},getVisibility:function(){return v;},setOnlinePolicy:function(qa){z=y;ha(qa);var ra={online_policy:qa},sa={type:t,online_policy:qa},ta=oa(p,ra,sa);ja(ta,sa);ca().log('set_online_policy',{data:ra});return qa;},getOnlinePolicy:function(){return y;},getFriendVisibility:function(qa){return u[qa]||da.UNLISTED;},allows:function(qa){if(this.getVisibility()===da.OFFLINE)return false;var ra=this.getOnlinePolicy();return ra===da.ONLINE_TO_WHITELIST?u[qa]==da.WHITELISTED:u[qa]!=da.BLACKLISTED;},setFriendsVisibility:function(qa,ra){if(qa.length>0){var sa={};for(var ta=0;ta<qa.length;ta++){var ua=qa[ta];w[ua]=u[ua];sa[ua]=ra;}ea(sa);var va=ra;if(va==da.UNLISTED)va=w[qa[0]];var wa={users:qa,setting:ra,setting_type:va},xa={type:r,settings:sa},ya=oa(o,wa,xa);ja(ya,xa);ca().log('set_friend_visibility',{data:wa});}return ra;},setFriendVisibilityMap:function(qa,ra){for(var sa in qa)w[sa]=u[sa];ea(qa);var ta={type:r,settings:qa};ja(na(ra,ta),ta);ca().log('set_friend_visibility_from_map',{data:qa});},allow:function(qa){if(this.allows(qa)){ca().error('allow_already_allowed');throw new Error("allow() should only be called for users that "+"are not already allowed");}if(this.getVisibility()===da.OFFLINE){ca().error('allow_called_while_offline');throw new Error("allow() should only be called when the user is already online");}var ra=this.getOnlinePolicy()===da.ONLINE_TO_WHITELIST?da.WHITELISTED:da.UNLISTED;return this.setFriendsVisibility([qa],ra);},disallow:function(qa){if(!this.allows(qa)){ca().error('disallow_already_disallowed');throw new Error("disallow() should only be called for users that "+"are not already disallowed");}if(this.getVisibility()===da.OFFLINE){ca().error('disallow_called_while_offline');throw new Error("disallow() should only be called when the user is already online");}var ra=this.getOnlinePolicy()===da.ONLINE_TO_BLACKLIST?da.BLACKLISTED:da.UNLISTED;return this.setFriendsVisibility([qa],ra);},getBlacklist:function(){var qa=[];for(var ra in u)if(u[ra]===da.BLACKLISTED)qa.push(ra);return qa;},getWhitelist:function(){var qa=[];for(var ra in u)if(u[ra]===da.WHITELISTED)qa.push(ra);return qa;},getMapForTest:function(){return u;},setMapForTest:function(qa){u=qa;}});da.inform('privacy-changed');da.inform('privacy-user-presence-changed');ca().log('initialized',{visibility:v,policy:y});g.subscribe(i.getArbiterType('privacy_changed'),pa.bind(this));g.subscribe(i.ON_CONFIG,function(qa,ra){var sa=ra.getConfig('visibility',null);if(sa!==null&&typeof(sa)!=='undefined'){var ta=sa?da.ONLINE:da.OFFLINE;ga(ta);ca().log('config_visibility',{vis:ta});}}.bind(this));a.PresencePrivacy=e.exports=da;},3);
__d("ChatVisibility",["Arbiter","JSLogger","PresencePrivacy"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('JSLogger'),i=b('PresencePrivacy'),j={isOnline:function(){return i.getVisibility()===i.ONLINE;},hasBlackbirdEnabled:function(){return this.isVisibleToMostFriends()||this.isVisibleToSomeFriends();},isVisibleToMostFriends:function(){return i.getOnlinePolicy()===i.ONLINE_TO_BLACKLIST&&i.getBlacklist().length>0;},isVisibleToSomeFriends:function(){return i.getOnlinePolicy()===i.ONLINE_TO_WHITELIST&&i.getWhitelist().length>0;},goOnline:function(k){if(i.getVisibility()===i.OFFLINE){h.create('blackbird').log('chat_go_online');i.setVisibility(i.ONLINE);g.inform('chat-visibility/go-online');}k&&k();},goOffline:function(k){if(i.getVisibility()===i.ONLINE){h.create('blackbird').log('chat_go_offline');i.setVisibility(i.OFFLINE);g.inform('chat-visibility/go-offline');}k&&k();},toggleVisibility:function(){if(j.isOnline()){j.goOffline();}else j.goOnline();}};a.ChatVisibility=e.exports=j;},3);
__d("MovingStat",[],function(a,b,c,d,e,f){function g(h){h=h||60000;var i={t:new Date(),count:0,v:0},j=i,k=0,l=0;function m(){var n=new Date()-h;while(j&&j.next&&j.t<n){k-=j.v;l-=j.count;j=j.next;}}this.add=function(n){k+=n;l++;var o=new Date();if(o-i.t<1000){i.v+=n;i.count++;}else{i.next={t:o,v:n,count:1};i=i.next;m();}};this.tally=function(n){n=n||1000;m();return {sum:k,count:l,timeAverage:k*n/h};};}e.exports=g;});
__d("ChannelManager",["AjaxRequest","Arbiter","AsyncRequest","ChannelConstants","ChannelInitialData","ChannelSubdomain","ChannelTransport","ChatVisibility","DTSG","Env","Event","FBAjaxRequest","JSLogger","MovingStat","PresenceCookieManager","PresenceState","PresenceUtil","Run","SystemEvents","URI","UserActivity","copyProperties","createArrayFrom","setIntervalAcrossTransitions","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f){var g=b('AjaxRequest'),h=b('Arbiter'),i=b('AsyncRequest'),j=b('ChannelConstants'),k=b('ChannelInitialData'),l=b('ChannelSubdomain'),m=b('ChannelTransport'),n=b('ChatVisibility'),o=b('DTSG'),p=b('Env'),q=b('Event'),r=b('FBAjaxRequest'),s=b('JSLogger'),t=b('MovingStat'),u=b('PresenceCookieManager'),v=b('PresenceState'),w=b('PresenceUtil'),x=b('Run'),y=b('SystemEvents'),z=b('URI'),aa=b('UserActivity'),ba=b('copyProperties'),ca=b('createArrayFrom'),da=b('setIntervalAcrossTransitions'),ea=b('setTimeoutAcrossTransitions'),fa,ga=s.create('channel'),ha=null;function ia(ta){ha=ta;}var ja={idle:{ok:'init!'},init:{ok:'pull!',error:'reconnect',sys_online:'init',sys_timetravel:'init'},pull:{ok:'pull!',error:'ping',error_missing:'pull',error_msg_type:'pull',refresh_0:'reconnect',refresh_110:'reconnect',refresh_111:'reconnect',refresh_112:'pull',refresh_113:'pull',refresh_117:'reconnect'},ping:{ok:'pull!',error:'ping',error_stale:'reconnect!'},reconnect:{ok:'init!',error:'reconnect',sys_online:'reconnect',sys_timetravel:'reconnect'},shutdown:{},_all:{error_max:'shutdown!',error_shutdown:'shutdown!',sys_owner:'reconnect',sys_nonowner:'idle!',sys_online:'ping',sys_offline:'idle!',sys_timetravel:'ping'}},ka={userActive:n.isOnline()?Date.now():0,sessionID:(Math.random()*2147483648|0).toString(16),streamingCapable:false,inStreaming:false,LONGPOLL_TIMEOUT:60000,STREAMING_TIMEOUT:60000,P_TIMEOUT:30000,IFRAME_LOAD_TIMEOUT:30000,MIN_RETRY_INTERVAL:5000,MAX_RETRY_INTERVAL:320000,MIN_12002_TIMEOUT:9000,MIN_504_TIMEOUT:20000,STALL_THRESHOLD:180000,JUMPSTART_THRESHOLD:90000,MIN_INIT_PROBE_DELAY:3000,INIT_PROBE_DELAY_RANDOMIZE_RANGE:12000,PROBE_DELAY:60000,PROBE_HEARTBEATS_INTERVAL_LOW:1000,PROBE_HEARTBEATS_INTERVAL_HIGH:3000,STREAMING_EXIT_STATE_ON_CONTINUE:false},la=1,ma={},na=0;function oa(){return i.lastSuccessTime?Math.round((Date.now()-i.lastSuccessTime)/1000):-1;}function pa(){var ta={};if(fa.getConfig('host'))ta[fa.getConfig('user_channel')]=fa.getConfig('seq',0);return ta;}function qa(){var ta=Date.now(),ua=Date.now(),va={total:0},wa='idle',xa=false;y.subscribe([y.USER,y.ONLINE,y.TIME_TRAVEL],function(ab,bb){sa(true);ua=null;fa.lastPullTime=Date.now();var cb;switch(ab){case y.USER:cb=y.isPageOwner()?j.SYS_OWNER:j.SYS_NONOWNER;break;case y.ONLINE:cb=bb?j.SYS_ONLINE:j.SYS_OFFLINE;break;case y.TIME_TRAVEL:cb=j.SYS_TIMETRAVEL;break;}fa.exitState({status:cb,stateId:la});});var ya=function(ab,bb){var cb=Date.now(),db;if(bb){ta=cb;db=bb.nextState||bb.state;}else db=wa;y.checkTimeTravel();if(ua){var eb=Math.round((cb-ua)/1000);if(eb>0){va[wa]=(va[wa]||0)+eb;va.total+=eb;}}wa=db;ua=cb;if(!ab){va.lastSuccessTime=oa();va.online=y.isOnline();ga.log('rollup',va);}};h.subscribe(j.ON_ENTER_STATE,ya);da(ya,60000);h.subscribe(s.DUMP_EVENT,function(ab,bb){bb.channelRollup=va;});var za=function(){if(fa.isShutdown()||fa.shouldIdle())return;y.checkTimeTravel();var ab=Date.now()-(fa.lastPullTime||p.start);if(!xa&&ab>ka.STALL_THRESHOLD){var bb=oa();ga.error('stall',{lastSuccessTime:bb,rollupState:wa});xa=true;}var cb=Date.now()-ta;if(fa.state=='pull'&&cb>ka.JUMPSTART_THRESHOLD){ta=null;ga.warn('jumpstart',{state:fa.state,dormant:cb});fa.enterState('init');}};da(za,10000);}function ra(){var ta=Date.now(),ua=1;function va(){ea(va,ua*1000);var ab=fa.state;if(ab=='idle'&&fa.shouldIdle())return;ga.bump('conn_t',ua);if(ab=='pull')ga.bump('conn_t_pull',ua);}va();var wa=[15,30,60,120,240],xa=false,ya=false;function za(ab){ea(function(){ga.rate('pullenter_'+ab,xa);ga.rate('pullexit_'+ab,ya);},ab*1000);}while(wa.length)za(wa.shift());h.subscribe(j.ON_ENTER_STATE,function(ab,bb){if(bb.state=='pull')xa=true;ta=Date.now();});h.subscribe(j.ON_EXIT_STATE,function(ab,bb){if(bb.state!='pull'||!ta)return;var cb='other';if(bb.status==j.OK){ya=true;cb='ok';}else if(bb.xhr&&bb.xhr.errorType){cb=/ar:(\w+)/.test(bb.xhr.errorType)&&RegExp.$1;}else if(/^sys_/.test(bb.status))return;var db=(Date.now()-ta)/1000;if(db<0){return;}else if(db>3600)db=3600;ga.bump('conn_num');ga.bump('conn_exit',db);ga.bump('conn_num_'+cb);ga.bump('conn_exit_'+cb,db);});}function sa(ta){if(ta){na=0;ma={};}else na++;}fa={state:'idle',nextState:null,lastPullTime:Date.now(),heartbeats:[],setTestCallback:ia,init:function(ta){this.init=function(){};if(typeof(aa)!='undefined'){aa.subscribe(function(){if(n.isOnline())ka.userActive=Date.now();}.bind(this));}else ga.error('user_activity_undefined');u.register('ch',pa);var ua=this.getConfig('max_conn',2),va=Math.floor(Math.random()*32);ka.subdomain=l.allocate(ua,va);if(typeof window.onpageshow!='undefined'){q.listen(window,'pagehide',l.clear);}else x.onUnload(l.clear);this._transportRate=new t(30000);var wa=(g.supportsCORS()&&!ka.forceIframe)?'CORSTransport':'IframeTransport';this.transport=new m[wa](this);if(ta)this.enterState.apply(this,arguments);h.subscribe(s.DUMP_EVENT,function(event,ya){ya.transportRate=this._transportRate.tally();ya.transportType=wa;ya.transportVersion=2;}.bind(this));qa();ra();if(fa.getConfig('tryStreaming')&&fa.getConfig('host')&&g.supportsCORS()&&!ka.forceIframe){var xa=ka.MIN_INIT_PROBE_DELAY+Math.random()*ka.INIT_PROBE_DELAY_RANDOMIZE_RANGE;ea(this._probeTest,xa);}},configure:function(){var ta=ca(arguments);ga.log('configure',ta);ta.forEach(ba.bind(null,ka));h.inform(j.ON_CONFIG,this);},getConfig:function(ta,ua){return ta in ka?ka[ta]:ua;},isShutdown:function(){return this.state=='shutdown';},shouldIdle:function(){return !(y.isPageOwner()&&y.isOnline());},_sendIframeError:function(ta){var ua=new i().setURI('/ajax/presence/reconnect.php').setData({reason:ta,fb_dtsg:o.getToken()}).setOption('suppressErrorHandlerWarning',true).setOption('retries',1).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(true);ua.specifiesWriteRequiredParams()&&ua.send();},_getDelay:function(){var ta=Math.min(ka.MIN_RETRY_INTERVAL*Math.pow(2,Math.max(0,na-1)),ka.MAX_RETRY_INTERVAL);return Math.floor(ta*(1+Math.random()*.5));},enterState:function(){if(this._inEnterState)ga.warn('enterstate_recursion');this._inEnterState=true;try{this._enterState.apply(this,arguments);this._inEnterState=false;}catch(ta){this._inEnterState=false;throw ta;}},_enterState:function(ta){var ua=0,va=ca(arguments);if(this.isShutdown())return;if(ta!='idle!'&&this.shouldIdle())return;la++;ka.stateId=la;clearTimeout(this._deferredTransition);this._deferredTransition=null;this.transport.enterState('idle');this.state='idle';this.nextState=null;if(/!$/.test(ta)){var wa=this._transportRate.tally().timeAverage,xa=fa.getConfig('MAX_CHANNEL_STATES_PER_SEC',1);if(wa>=xa){if(!this._throttled){this._throttled=true;ga.warn('throttled');}ga.bump('throttle');ua=1000/xa;}}else if(!(/#$/.test(ta)))ua=this._getDelay();ta=ta.replace(/\W*$/,'');if(!ja[ta])throw new Error('invalid state:'+ta);var ya;if(ua<=0){ya={state:ta};this._transportRate.add(1);this.state=ta;var za=this['_enter_'+this.state];if(za){va.shift();za.apply(this,va);}if(/init|idle|pull|ping/.test(this.state)){if(ka.streamingCapable&&/pull/.test(this.state))this.heartbeats=[];this.transport.enterState(this.state,ka);if(this.state=='ping'){ya.url=m.getURI(ka).toString();ya.port=ka.port||'undefined';}}}else{this.state='idle';this.nextState=ta;ya={state:this.state,delay:ua,nextState:ta};va[0]=ta+'#';this._deferredTransition=ea((function(){this._deferredTransition=null;this.enterState.apply(this,va);}).bind(this),ua);}if(/pull/.test(ta)){ya.client_id=ka.sessionID;ya.streaming=ka.inStreaming;}ga.log('enter_'+this.state,ya);h.inform(j.ON_ENTER_STATE,ya);},exitState:function(ta,ua){var va=ta.stateId,wa=ta.status;if(this.isShutdown()||va<la)return;var xa=ca(arguments),ya=this.state;xa[0]=ta.status;var za={state:ya,status:wa};if(/pull/.test(ya)){za.client_id=ka.sessionID;za.streaming=ka.inStreaming;}if(/ping/.test(ya)&&wa!=j.OK)za.url=m.getURI(ka).toString();if(this.nextState)za.nextState=this.nextState;if(ua&&ua.errorType){za.xhr=ua.toJSON?ua.toJSON():ua;delete za.xhr.json;}if(ua&&ua.json){if(ua.json.t)za.t=ua.json.t;if(ua.json.reason)za.reason=ua.json.reason;if(ua.json.seq)za.seq=ua.json.seq;}ga.log('exit_'+ya,za);h.inform(j.ON_EXIT_STATE,za);var ab=this['_exit_'+ya];if(ab)wa=ab.apply(this,xa)||wa;if(wa!=j.OK){sa();ma[ya]=(ma[ya]||0)+1;}var bb=ja[this.nextState||ya][wa]||ja._all[wa],cb=bb&&bb.replace(/!*$/,'');if(!cb){ga.error('terminal_transition',za);this._shutdownHint=j.HINT_INVALID_STATE;bb='shutdown!';}this._lastState=ya;this._lastStatus=wa;this.enterState(bb);},_processTransportData:function(ta,ua){var va=ua.json,wa=va.t;if('s' in va){va.seq=va.s;delete va.s;}var xa=ka.seq;if('seq' in va){ka.seq=va.seq;v.doSync();}switch(wa){case 'continue':if(ka.inStreaming&&this.heartbeats.length<1){ka.streamingCapable=false;ga.log('switch_to_longpoll');ea(this._probeTest,ka.PROBE_DELAY);}sa(true);if(!ka.inStreaming||ka.STREAMING_EXIT_STATE_ON_CONTINUE)this.exitState({status:j.OK,stateId:ta});break;case 'refresh':case 'refreshDelay':this.exitState({status:'refresh_'+(va.reason||0),stateId:ta},ua);break;case 'fullReload':u.clear();ga.log('invalid_history');h.inform(j.ON_INVALID_HISTORY);this.exitState({status:j.ERROR_MISSING,stateId:ta},ua);break;case 'msg':var ya,za,ab,bb;sa(true);za=va.ms;ab=ka.seq-za.length;for(ya=0;ya<za.length;ya++,ab++)if(ab>=xa){bb=za[ya];if(bb.type){if(bb.type==='messaging'&&bb.message){var cb=bb.unread_counts&&bb.unread_counts.inbox;ga.debug('message',{type:'messaging',inbox_unread:cb,tid:bb.message.tid,mid:bb.message.mid});}else if(bb.type==='m_messaging'){ga.debug('message',{type:'m_messaging',tid:bb.tid,mid:bb.uuid});}else ga.debug('message',{type:bb.type});h.inform(j.getArbiterType(bb.type),{obj:bb});}}else ga.warn('seq_regression',{seq:ab,last_seq:xa,messages:za.length});break;case 'heartbeat':if(ka.inStreaming){var db=Date.now();if(this.heartbeats.length>0){var eb=db-this.heartbeats[this.heartbeats.length-1];ga.log('heartbeat_interval',{client_id:ka.sessionID,interval:eb});}this.heartbeats.push(db);}break;default:ga.error('unknown_msg_type',{type:wa});break;}},_enter_init:function(){if(ma.init>=fa.getConfig('MAX_INIT_FAILS',2))return setTimeout(this.exitState.bind(this,{status:j.ERROR_MAX,stateId:la}),0);this._initTimer=ea(this.exitState.bind(this,{status:j.ERROR,stateId:la},'timeout'),ka.IFRAME_LOAD_TIMEOUT);},_enter_reconnect:function(ta){var ua=la;if(!w.hasUserCookie()){ga.warn('no_user_cookie');setTimeout(function(){fa._shutdownHint=j.HINT_AUTH;fa.exitState({status:j.ERROR_SHUTDOWN,stateId:ua});},0);return;}var va={reason:ta,fb_dtsg:o.getToken()};if(p.fb_isb)va.fb_isb=p.fb_isb;if(ha)ha(va);var wa=new r('GET','/ajax/presence/reconnect.php',va);wa.onSuccess=(function(){fa.configure(wa.json);u.store();this.exitState({status:j.OK,stateId:ua});}).bind(this);wa.onError=(function(){var xa=wa.json&&wa.json.error;if(wa.errorType==g.TRANSPORT_ERROR||wa.errorType==g.PROXY_ERROR)this._shutdownHint=j.HINT_CONN;if(xa&&xa==1356007){this._shutdownHint=j.HINT_MAINT;}else if(xa==1357001||xa==1357004||xa==1348009){this._shutdownHint=j.HINT_AUTH;}else this._shutdownHint=null;this.exitState({status:this._shutdownHint?j.ERROR_SHUTDOWN:j.ERROR,stateId:ua},wa);}).bind(this);wa.send();},_enter_shutdown:function(){h.inform(j.ON_SHUTDOWN,{reason:this._shutdownHint});},_exit_init:function(ta){if(this._initTimer)this._initTimer=clearTimeout(this._initTimer);if(ta==j.ERROR_MAX)this._sendIframeError(j.reason_IFrameLoadGiveUp);},_exit_pull:function(ta){if(ta==j.OK)this.lastPullTime=Date.now();},_exit_ping:function(ta){if(ta==j.OK){var ua=Date.now()-(this.lastPullTime||p.start);if(ua>ka.STALL_THRESHOLD)return j.ERROR_STALE;}},_probeTest:function(){ka.streamingCapable=false;var ta=[],ua={mode:'stream',format:'json'},va=new z('/probe').setDomain(ka.host+'.facebook.com').setPort(ka.port).setSecure(z().isSecure()).setQueryData(ua),wa=new g('GET',va);wa.onJSON=function(xa,ya){if(xa&&xa.json&&xa.json.t==='heartbeat'){ta.push(Date.now());if(ta.length>=2){var za=ta[1]-ta[0];if(za>=ka.PROBE_HEARTBEATS_INTERVAL_LOW&&za<=ka.PROBE_HEARTBEATS_INTERVAL_HIGH){ka.streamingCapable=true;ga.log('switch_to_streaming');}ga.log('probe_ok',{time:za});}}};wa.onSuccess=function(xa){if(ta.length!=2){ka.streamingCapable=false;ga.error('probe_error',{error:'beats.length = '+ta.length});}};wa.onError=function(xa){ka.streamingCapable=false;ga.error('probe_error',xa);};ga.log('probe_request');wa.send();}};e.exports=fa;if(k.channelConfig){fa.configure(k.channelConfig);if(/shutdown/.test(k.state))fa._shutdownHint=j[k.reason];fa.init(k.state,k.reason);}});
__d("ChannelConnection",["Arbiter","copyProperties","ChatConfig","Run","SystemEvents","ChannelConstants","ChannelManager","JSLogger","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('copyProperties'),i=b('ChatConfig'),j=b('Run'),k=b('SystemEvents'),l=b('ChannelConstants'),m=b('ChannelManager'),n=b('JSLogger'),o=b('setTimeoutAcrossTransitions'),p=n.create('channel_connection'),q=null,r=null,s=null,t=null,u=0,v=h(new g(),{CONNECTED:'chat-connection/connected',RECONNECTING:'chat-connection/reconnecting',SHUTDOWN:'chat-connection/shutdown',MUTE_WARNING:'chat-connection/mute',UNMUTE_WARNING:'chat-connection/unmute'});function w(){if(r){clearTimeout(r);r=null;}}function x(){w();p.log('unmute_warning');v.inform(v.UNMUTE_WARNING);}function y(ca){w();r=o(x,ca);p.log('mute_warning',{time:ca});v.inform(v.MUTE_WARNING);}function z(){if(s){clearTimeout(s);s=null;}}function aa(ca,da){z();if(ca===l.ON_ENTER_STATE&&(da.nextState||da.state)==='pull'){if(t!==v.CONNECTED){p.log('connected');var ea=!t;t=v.CONNECTED;u=0;v.inform(v.CONNECTED,{init:ea});}}else if(ca===l.ON_ENTER_STATE&&((da.nextState||da.state)==='ping'||(!da.nextState&&da.state==='idle'))){s=o(function(){var fa=null;if(!(da.state==='idle'&&!da.nextState))fa=(da.delay||0);p.log('reconnecting',{delay:fa});if(v.disconnected())p.log('reconnecting_ui',{delay:fa});t=v.RECONNECTING;(da.state==='idle')&&u++;if(u>1){v.inform(v.RECONNECTING,fa);}else if(!da.nextState&&da.state==='idle')aa(ca,da);},500);}else if(ca===l.ON_SHUTDOWN){p.log('shutdown',{reason:da.reason});t=v.SHUTDOWN;u=0;v.inform(v.SHUTDOWN,da.reason);}}function ba(ca){if(m.state==='ping'||m.isShutdown())return;p.log('reconnect',{now:ca});v.inform(v.RECONNECTING,0);if(!!ca){if(q!==null){clearTimeout(q);q=null;}m.enterState('ping!');}else if(!q)q=o(function(){m.enterState('ping!');q=null;},i.get('channel_manual_reconnect_defer_msec'));}if(m.isShutdown()){aa(l.ON_SHUTDOWN,m._shutdownHint);}else aa(l.ON_ENTER_STATE,{state:m.state,nextState:m.nextState,delay:0});g.subscribe([l.ON_ENTER_STATE,l.ON_SHUTDOWN],aa);k.subscribe(k.TIME_TRAVEL,function(){ba();y(i.get('mute_warning_time_msec'));});j.onBeforeUnload(z,false);h(v,{disconnected:function(){return t===v.SHUTDOWN||(t===v.RECONNECTING&&!r&&u>1);},isShutdown:function(){return t===v.SHUTDOWN;},reconnect:ba,unmuteWarning:x});e.exports=v;});
__d("ChatContexts",[],function(a,b,c,d,e,f){var g={};function h(k){var l=k?k.subtext:'';return l;}function i(k,l){g[k]=l;}var j={get:function(k){if(k in g){return g[k];}else return null;},update:function(k){for(var l in k)i(l,k[l]);},getShortDisplay:function(k){return h(j.get(k));}};e.exports=j;});
__d("Poller",["ArbiterMixin","AsyncRequest","Cookie","CurrentUser","copyProperties","emptyFunction","mixin","setTimeoutAcrossTransitions"],function(a,b,c,d,e,f){var g=b('ArbiterMixin'),h=b('AsyncRequest'),i=b('Cookie'),j=b('CurrentUser'),k=b('copyProperties'),l=b('emptyFunction'),m=b('mixin'),n=b('setTimeoutAcrossTransitions'),o=m(g);for(var p in o)if(o.hasOwnProperty(p))r[p]=o[p];var q=o===null?null:o.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=o;function r(u){"use strict";this._config=k({clearOnQuicklingEvents:true,setupRequest:l,interval:null,maxRequests:Infinity,dontStart:false},u);if(!this._config.dontStart)this.start();}r.prototype.start=function(){"use strict";if(this._polling)return this;this._requests=0;this.request();return this;};r.prototype.stop=function(){"use strict";this._cancelRequest();return this;};r.prototype.mute=function(){"use strict";this._muted=true;return this;};r.prototype.resume=function(){"use strict";if(this._muted){this._muted=false;if(!this._handle&&this._polling)return this.request();}return this;};r.prototype.skip=function(){"use strict";this._skip=true;return this;};r.prototype.reset=function(){"use strict";return this.stop().start();};r.prototype.request=function(){"use strict";this._cancelRequest();this._polling=true;if(!t())return this._done();if(this._muted)return this;if(++this._requests>this._config.maxRequests)return this._done();var u=new h(),v=false;u.setInitialHandler(function(){return !v;});this._cancelRequest=function(){v=true;this._cleanup();}.bind(this);u.setFinallyHandler(s.bind(this));u.setInitialHandler=l;u.setFinallyHandler=l;this._config.setupRequest(u,this);if(this._skip){this._skip=false;setTimeout(s.bind(this),0);}else u.send();return this;};r.prototype.isPolling=function(){"use strict";return this._polling;};r.prototype.isMuted=function(){"use strict";return this._muted;};r.prototype.setInterval=function(u){"use strict";if(u){this._config.interval=u;this.start();}};r.prototype.getInterval=function(){"use strict";return this._config.interval;};r.prototype._cleanup=function(){"use strict";if(this._handle)clearTimeout(this._handle);this._handle=null;this._cancelRequest=l;this._polling=false;};r.prototype._done=function(){"use strict";this._cleanup();this.inform('done',{sender:this});return this;};r.MIN_INTERVAL=2000;k(r.prototype,{_config:null,_requests:0,_muted:false,_polling:false,_skip:false,_cancelRequest:l});function s(){if(!this._polling)return;if(this._requests<this._config.maxRequests){var u=this._config.interval;u=typeof u==='function'?u(this._requests):u;u=(u>r.MIN_INTERVAL)?u:r.MIN_INTERVAL;if(this._config.clearOnQuicklingEvents){this._handle=setTimeout(this.request.bind(this),u);}else this._handle=n(this.request.bind(this),u);}else this._done();}function t(){return j.getID()==i.get('c_user');}e.exports=r;});
__d("PresenceStatus",["AvailableListConstants","ChatConfig","ChatVisibility","CurrentUser","LastMobileActiveTimes","PresencePrivacy","ServerTime","createObjectFrom"],function(a,b,c,d,e,f){var g=b('AvailableListConstants'),h=b('ChatConfig'),i=b('ChatVisibility'),j=b('CurrentUser'),k=b('LastMobileActiveTimes'),l=b('PresencePrivacy'),m=b('ServerTime'),n=b('createObjectFrom'),o={},p={},q={},r={},s={},t={},u={resetPresenceData:function(){o={};t={};s={};r={};},reset:function(){u.resetPresenceData();p={};q={};},get:function(v){if(v==j.getID())return i.isOnline()?g.ACTIVE:g.OFFLINE;var w=g.OFFLINE;if(v in o)w=o[v];if(w==g.OFFLINE)if(p[v])w=g.MOBILE;if(!l.allows(v))w=g.OFFLINE;return w;},getDetailedActivePresence:function(v){if(!h.get('sidebar_mobile_web_presence'))return null;var w=t[v];if(!w)return g.ACTIVE_ON_WEB;var x=w[g.WEB_STATUS],y=w[g.FB_APP_STATUS],z=w[g.MESSENGER_STATUS],aa=w[g.OTHER_STATUS];if(y===g.STATUS_ACTIVE||z===g.STATUS_ACTIVE){return g.ACTIVE_ON_MOBILE;}else if(x===g.STATUS_ACTIVE||aa===g.STATUS_ACTIVE){return g.ACTIVE_ON_WEB;}else return null;},isBirthday:function(v){return q[v];},getGroup:function(v){if(!h.get('chat_group_presence',0))return g.OFFLINE;return v.some(function(w){if(w==j.getID())return false;return (u.get(w)===g.ACTIVE);})?g.ACTIVE:g.OFFLINE;},set:function(v,w,x,y,z){if(v==j.getID())return false;switch(w){case g.OFFLINE:case g.IDLE:case g.ACTIVE:case g.MOBILE:break;default:return false;}var aa=u.get(v),ba=aa!=w;if(ba&&aa==g.ACTIVE){var ca={};ca[v]=m.get();k.update(ca);}if(x){r[v]=m.get();s[v]=y;}o[v]=w;if(z)t[v]=z;return ba;},setMobileFriends:function(v){p=n(v);},setBirthdayFriends:function(v){q=n(v);},getOnlineIDs:function(){var v,w=[];for(v in o)if(u.get(v)===g.ACTIVE)w.push(v);return w;},getAvailableIDs:function(){var v=u.getOnlineIDs(),w;for(w in p){if(o[w])continue;v.push(w);}return v;},getOnlineCount:function(){return u.getOnlineIDs().length;},getPresenceStats:function(){var v=0,w=0,x=0,y=0,z=0;for(var aa in o){v+=1;switch(u.get(aa)){case g.OFFLINE:w+=1;break;case g.IDLE:x+=1;break;case g.ACTIVE:y+=1;break;case g.MOBILE:z+=1;break;default:break;}}return {total:v,offline:w,idle:x,active:y,mobile:z};},getDebugInfo:function(v){return {id:v,presence:o[v],overlaySource:s[v],overlayTime:r[v],mobile:p[v]};}};e.exports=u;});
__d("PresencePoller",["AvailableListConstants","AvailableListInitialData","BanzaiODS","ChatContexts","ChatVisibility","CurrentUser","JSLogger","LastMobileActiveTimes","Poller","PresenceStatus","ServerTime","ShortProfiles","UserActivity","copyProperties","debounceAcrossTransitions","ChannelImplementation"],function(a,b,c,d,e,f){var g=b('AvailableListConstants'),h=b('AvailableListInitialData'),i=b('BanzaiODS'),j=b('ChatContexts'),k=b('ChatVisibility'),l=b('CurrentUser'),m=b('JSLogger'),n=b('LastMobileActiveTimes'),o=b('Poller'),p=b('PresenceStatus'),q=b('ServerTime'),r=b('ShortProfiles'),s=b('UserActivity'),t=b('copyProperties'),u=b('debounceAcrossTransitions'),v=b('ChannelImplementation').instance,w=30,x=5,y='/ajax/chat/buddy_list.php',z=1800000,aa=h.pollInterval,ba=h.lazyPollInterval,ca=h.lazyThreshold,da=m.create('available_list'),ea='presence_poller';i.setEntitySample(ea,.01);function fa(ga){"use strict";this.$PresencePoller0=ga;this.$PresencePoller1=false;this.$PresencePoller2=h.chatNotif;this.$PresencePoller3=new o({interval:aa,setupRequest:this.$PresencePoller4.bind(this),clearOnQuicklingEvents:false,dontStart:true});if(h.availableCount>=w){this.$PresencePoller5=Date.now();this.$PresencePoller6=Date.now();this.$PresencePoller7=Date.now();this.$PresencePoller8=h.updateTime;}else{this.$PresencePoller5=0;this.$PresencePoller8=0;this.$PresencePoller6=0;this.$PresencePoller7=0;}this.$PresencePoller9=false;this.$PresencePollera=0;this.$PresencePollerb('available_initial_data',h.updateTime,h.availableList,h.lastActiveTimes,h.mobileFriends,h.birthdayFriends);s.subscribe(function(ha,ia){if(ia.idleness>aa)this.forceUpdate();}.bind(this));}fa.prototype.start=function(){"use strict";setTimeout(this.$PresencePoller3.start.bind(this.$PresencePoller3),0);};fa.prototype.forceUpdate=function(){"use strict";if(!this.$PresencePoller9)this.$PresencePoller3.request();};fa.prototype.getIsUserIdle=function(){"use strict";return this.$PresencePoller1;};fa.prototype.getWebChatNotification=function(){"use strict";return this.$PresencePoller2;};fa.prototype.getCallback=function(){"use strict";return this.$PresencePoller0;};fa.prototype.$PresencePollerc=function(){"use strict";return u(function(){this.$PresencePoller0(g.ON_AVAILABILITY_CHANGED);}.bind(this),0)();};fa.prototype.$PresencePollerb=function(ga,ha,ia,ja,ka,la){"use strict";this.$PresencePoller8=ha;if(!Array.isArray(ia)){p.resetPresenceData();for(var ma in ia)p.set(ma,ia[ma].a,false,ga,ia[ma].p);}if(ja)n.update(ja);if(ka)p.setMobileFriends(ka);if(la)p.setBirthdayFriends(la);this.$PresencePollerc();};fa.prototype.$PresencePoller4=function(ga){"use strict";if(v.isShutdown()||!k.isOnline()){this.$PresencePoller3.skip();i.bumpEntityKey(ea,'skip.offline');return;}if(Date.now()-this.$PresencePoller5<aa){this.$PresencePoller3.skip();i.bumpEntityKey(ea,'skip.recent');return;}i.bumpEntityKey(ea,'request');this.$PresencePoller5=Date.now();var ha=(Date.now()-this.$PresencePoller7>z),ia=r.getCachedProfileIDs().join(",");this.$PresencePoller9=true;ga.setHandler(this.$PresencePollerd.bind(this)).setErrorHandler(this.$PresencePollere.bind(this)).setOption('suppressErrorAlerts',true).setOption('retries',1).setData({user:l.getID(),cached_user_info_ids:ia,fetch_mobile:ha}).setURI(y).setAllowCrossPageTransition(true);};fa.prototype.$PresencePollerd=function(ga){"use strict";var ha=ga.getPayload(),ia=ha.buddy_list;if(!ia){this.$PresencePollere(ga);return;}i.bumpEntityKey(ea,'response');this.$PresencePoller9=false;this.$PresencePollerf();this.$PresencePoller6=Date.now();q.update(ha.time);if(ia.mobile_friends)this.$PresencePoller7=Date.now();this.$PresencePollera=0;this.$PresencePollerg();var ja=ia.userInfos;if(ja)r.setMulti(ja);var ka=ia.chatContexts;ka&&j.update(ka);this.$PresencePoller1=ia.userIsIdle;if(ia.chatNotif!==undefined){this.$PresencePoller2=ia.chatNotif;this.$PresencePoller0(g.ON_CHAT_NOTIFICATION_CHANGED,this.$PresencePoller2);}this.$PresencePollerb('buddy_list_poller',ha.time,ia.nowAvailableList,ia.last_active_times,ia.mobile_friends,ia.todays_birthdays);};fa.prototype.$PresencePollere=function(ga){"use strict";i.bumpEntityKey(ea,'error');if(ga.getError()==1356007)return;this.$PresencePoller9=false;this.$PresencePollera++;if(this.$PresencePollera++>=x)this.$PresencePoller0(g.ON_UPDATE_ERROR);};fa.prototype.$PresencePollerg=function(){"use strict";var ga=s.isActive(ca)?aa:ba;i.bumpEntityKey(ea,'period.'+ga);this.$PresencePoller3.setInterval(ga);};fa.prototype.$PresencePollerf=function(){"use strict";var ga=Date.now(),ha=ga-this.$PresencePoller6;da.log('buddylist_presence_stats',t({duration:ha},p.getPresenceStats()));};e.exports=fa;});
__d("AvailableList",["Arbiter","ArbiterMixin","AsyncRequest","AvailableListConstants","ChannelImplementation","ChannelConstants","ChatConfig","JSLogger","PresencePoller","PresencePrivacy","PresenceStatus","ShortProfiles","TypingDetector","copyProperties","debounceAcrossTransitions","emptyFunction"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('ArbiterMixin'),i=b('AsyncRequest'),j=b('AvailableListConstants'),k=b('ChannelImplementation').instance,l=b('ChannelConstants'),m=b('ChatConfig'),n=b('JSLogger'),o=b('PresencePoller'),p=b('PresencePrivacy'),q=b('PresenceStatus'),r=b('ShortProfiles'),s=b('TypingDetector'),t=b('copyProperties'),u=b('debounceAcrossTransitions'),v=b('emptyFunction'),w=t({},j,h);w.subscribe([j.ON_AVAILABILITY_CHANGED,j.ON_UPDATE_ERROR],function(da,ea){g.inform(da,ea);});var x=u(function(){w.inform(j.ON_AVAILABILITY_CHANGED);},0);function y(da,ea,fa,ga){var ha=q.set(da,ea,fa,ga);if(ha)x();}function z(da){var ea=da.payload.availability||{};for(var fa in ea)y(fa,ea[fa],true,'mercury_tabs');}function aa(da){var ea=w.getDebugInfo(da),fa=(ea.presence==j.ACTIVE),ga=new i('/ajax/mercury/tabs_presence.php').setData({target_id:da,to_online:fa,presence_source:ea.overlaySource,presence_time:ea.overlayTime}).setHandler(z).setErrorHandler(v).setAllowCrossPageTransition(true).send();}function ba(da,ea){ea.chat_config=m.getDebugInfo();ea.available_list_debug_info={};w.getAvailableIDs().forEach(function(fa){ea.available_list_debug_info[fa]=w.getDebugInfo(fa);});ea.available_list_poll_interval=w._poller&&w._poller.getInterval();}var ca=new o(function(event){w.inform(event);});t(w,{get:function(da){return q.get(da);},updateForID:function(da){aa(da);},getWebChatNotification:function(){return ca.getWebChatNotification();},isUserIdle:function(){return ca.getIsUserIdle();},isReady:function(){return true;},set:function(da,ea,fa){y(da,ea,true,fa);},update:function(){ca.forceUpdate();},isIdle:function(da){return w.get(da)==j.IDLE;},getOnlineIDs:function(){return q.getOnlineIDs();},getAvailableIDs:function(){return q.getAvailableIDs();},getOnlineCount:function(){return q.getOnlineCount();},getDebugInfo:function(da){var ea=q.getDebugInfo(da),fa=r.getNow(da);if(fa)ea.name=fa.name;return ea;}});ca.start();g.subscribe(n.DUMP_EVENT,ba);p.subscribe(['privacy-changed','privacy-availability-changed','privacy-user-presence-response'],x);k.subscribe([k.CONNECTED,k.RECONNECTING,k.SHUTDOWN,k.MUTE_WARNING,k.UNMUTE_WARNING],x);g.subscribe(l.getArbiterType('buddylist_overlay'),function(da,ea){var fa=ea.obj.overlay;for(var ga in fa)w.set(ga,fa[ga].a,fa[ga].s||'channel');});g.subscribe([l.getArbiterType('typ'),l.getArbiterType('ttyp')],function(da,ea){var fa=ea.obj;if(fa.st===s.TYPING){var ga=fa.from;w.set(ga,j.ACTIVE,'channel-typing');}});a.AvailableList=e.exports=w;});
__d("BlackbirdUpsell",["Event","Arbiter","AsyncRequest","LegacyContextualDialog","DOM","LayerDestroyOnHide","LayerHideOnTransition","PresencePrivacy","copyProperties","BlackbirdUpsellConfig","BlackbirdUpsellConstants","BlackbirdUpsellTemplates"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Arbiter'),i=b('AsyncRequest'),j=b('LegacyContextualDialog'),k=b('DOM'),l=b('LayerDestroyOnHide'),m=b('LayerHideOnTransition'),n=b('PresencePrivacy'),o=b('copyProperties'),p=b('BlackbirdUpsellConfig'),q=b('BlackbirdUpsellConstants'),r=b('BlackbirdUpsellTemplates'),s='/ajax/chat/blackbird/update_clicks.php',t='/ajax/chat/blackbird/update_impressions.php',u='/ajax/chat/blackbird/dismiss.php',v=235,w=null,x=null,y=false,z=false;function aa(){}o(aa,{shouldShow:function(){if(this._dialogDismissed)return false;if(this.isEducation()){return !p.EducationDismissed&&p.EducationImpressions<p.EducationImpressionLimit;}else return !!p.UpsellGK&&!p.UpsellDismissed&&p.UpsellImpressions<p.UpsellImpressionLimit&&p.FriendCount>=p.UpsellMinFriendCount;},isEducation:function(){return p.TimeOffline<=p.EducationTimeOfflineThresdhold;},getOfflineContent:function(){if(this.isEducation()){return this._getEducationContent();}else return this._getUpsellContent();},_getEducationContent:function(){ga();var ka=r[':fb:chat:blackbird:offline-educate'].build(),la=ka.getNode('chatSettingsButton');g.listen(la,'click',function(){h.inform('chat/advanced-settings-dialog-opened');ja(q.CLICK_TYPE_OPEN_SETTINGS);da();});return ka.getRoot();},_getUpsellContent:function(){fa();var ka=r[':fb:chat:blackbird:upsell'].build(),la=ka.getNode('chatSettingsButton');g.listen(la,'click',function(){h.inform('chat/advanced-settings-dialog-opened');ia(q.CLICK_TYPE_OPEN_SETTINGS);ca();});var ma=ka.getNode('enableChatButton');g.listen(ma,'click',function(){ia(q.CLICK_TYPE_ENABLE_CHAT);ca();});return ka.getRoot();},getBlackbirdContent:function(ka){ga();switch(ka){case n.ONLINE:return r[':fb:chat:blackbird:most-friends-educate'].build().getRoot();case n.OFFLINE:return r[':fb:chat:blackbird:some-friends-educate'].build().getRoot();}},showOfflineDialog:function(ka){this.showDialog(ka,this.getOfflineContent.bind(this));},showBlackbirdDialog:function(ka,la){this.showDialog(ka,this.getBlackbirdContent.bind(null,la));},showDialog:function(ka,la){!w&&this._constructDialog();k.setContent(x,la());w.setContext(ka);w.show();},hide:function(){if(w&&w.isShown())w.hide();},dismiss:function(){this.hide();if(this.isEducation()){da();}else ca();},registerDismissClick:function(){if(this.isEducation()){ja(q.CLICK_TYPE_DISMISS_PROMO);}else ia(q.CLICK_TYPE_DISMISS_PROMO);},isVisible:function(){return z&&!y;},_constructDialog:function(){var ka=r[':fb:chat:blackbird:dialog-frame'].build();x=ka.getNode('dialogContent');w=new j();w.init(ka.getRoot());w.setPosition('above').setWidth(v).setFixed(true).disableBehavior(l).disableBehavior(m);g.listen(ka.getNode('dialogCloseButton'),'click',this.dismiss.bind(this));g.listen(ka.getNode('dialogCloseButton'),'click',this.registerDismissClick.bind(this));}});function ba(ka,la){if(!y&&z){y=true;n.inform('privacy-user-presence-changed');var ma=new i(u);ma.setData({source:ka,impressions:la,time_offline:p.TimeOffline});ma.setErrorHandler(function(){y=false;});ma.send();}}function ca(){ba(q.ACTION_UPSELL,p.UpsellImpressions);}function da(){ba(q.ACTION_EDUCATE,p.EducationImpressions);}function ea(ka,la){if(!z){z=true;var ma=new i(t);ma.setData({action:ka,impressions:la,time_offline:p.TimeOffline});ma.setErrorHandler(function(){z=false;});ma.send();}}function fa(){ea(q.ACTION_UPSELL,p.UpsellImpressions);}function ga(){ea(q.ACTION_EDUCATE,p.EducationImpressions);}function ha(ka,la,ma,na){var oa=new i(s);oa.setData({action:ka,impressions:ma,source:la,time_offline:na});oa.send();}function ia(ka){ha(ka,q.ACTION_UPSELL,p.UpsellImpressions,p.TimeOffline);}function ja(ka){ha(ka,q.ACTION_EDUCATE,p.EducateImpressions,p.TimeOffline);}h.subscribe('chat/advanced-settings-dialog-opened',aa.dismiss.bind(aa));h.subscribe('chat-visibility/go-online',aa.dismiss.bind(aa));h.subscribe('chat-visibility/go-offline',aa.dismiss.bind(aa));e.exports=aa;});
__d("ChatTypeaheadConstants",[],function(a,b,c,d,e,f){var g={USER_TYPE:'user',THREAD_TYPE:'thread',FRIEND_TYPE:'friend',NON_FRIEND_TYPE:'non_friend',FB4C_TYPE:'fb4c',HEADER_TYPE:'header'};e.exports=g;});
__d("Chat",["Arbiter","ChatTypeaheadConstants","MercuryParticipantTypes"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('ChatTypeaheadConstants'),i=b('MercuryParticipantTypes');function j(o,p){d(['ChatImpressionLogger','PresenceStatus'],function(q,r){var s=p&&p.source;if(s&&s==='ordered_list'||s==='more_online_friends'||s==='online_friends'||s==='recent_threads_in_divebar_new'||s==='recent_threads_in_divebar'||s==='presence'||s==='typeahead'){p.viewport_width=document.body.clientWidth;p.target=o;p.target_presence=r.get(o);q.logImpressions(p);}});}var k={buddyListNub:'buddylist-nub/initialized',sidebar:'sidebar/initialized'};function l(o,p){g.subscribe(k[o],function(event,q){p(q);});}function m(){return (Math.random()*2147483648|0).toString(16);}var n={openTab:function(o,p,q){if(window.External&&window.External.Chat&&window.External.Chat.openWindow)window.External.Chat.openWindow(o);setTimeout(j.bind(null,o,q),0);d(['MercuryThreads'],function(r){if(!p||p===i.FRIEND||p===h.FRIEND_TYPE||p===h.USER_TYPE){var s=r.get().getCanonicalThreadToUser(o),t=m();g.inform('chat/open-tab',{thread_id:s.thread_id,signature_id:t});return;}if(p===h.THREAD_TYPE)d(['ChatOpenTab'],function(u){if(o){u.openThread(o);}else u.openEmptyTab();});});},openBuddyList:function(){l('buddyListNub',function(o){o.show();l('sidebar',function(p){p.enable();});});},closeBuddyList:function(){l('buddyListNub',function(o){o.hide();});},toggleSidebar:function(){l('sidebar',function(o){o.toggle();});},goOnline:function(o){d(['ChatVisibility'],function(p){p.goOnline(o);});},isOnline:function(){var o=null;d(['ChatVisibility'],function(p){o=p;});return o&&o.isOnline();}};a.Chat=e.exports=n;},3);
__d("ChatGroupThreadsController",["ArbiterMixin","ChatConfig","InitialMultichatList","MercuryOrderedThreadlist","MercuryServerRequests","MercuryThreadInformer","MercuryThreads","MessagingTag","copyProperties"],function(a,b,c,d,e,f){var g=b('ArbiterMixin'),h=b('ChatConfig'),i=b('InitialMultichatList'),j=b('MercuryOrderedThreadlist').get(),k=b('MercuryServerRequests').get(),l=b('MercuryThreadInformer').get(),m=b('MercuryThreads').get(),n=b('MessagingTag'),o=b('copyProperties'),p,q=[],r=h.get('max_sidebar_multichats',3);function s(x){var y=m.getThreadMetaNow(x);return y&&!y.is_canonical&&m.canReply(x);}var t=i.payload;if(t){k.handleUpdate(t);var u=t.threads||[];q=u.map(function(x){return x.thread_id;});}if(q.length){var v=m.getThreadMetaNow(q[q.length-1]);p=v&&(v.timestamp-1);}if(!p)p=Date.now();var w={};o(w,g,{getThreadIDs:function(){var x=0;return q.filter(function(y){return x<r&&s(y)&&++x;});}});l.subscribe('threadlist-updated',function(){q=j.getThreadlistUntilTimestamp(p,n.INBOX,n.GROUPS).filter(s);w.inform('update');});e.exports=w;});
__d("ChatHovercard",["Arbiter","AsyncLoader","Hovercard","JSLogger","debounce"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('AsyncLoader'),i=b('Hovercard'),j=b('JSLogger'),k=b('debounce'),l=5,m=new h('/ajax/chat/hovercard/sidebar.php','hover'),n=j.create('chat_hovercard');g.subscribe('Hovercard/dirty',m.reset.bind(m));function o(s,t){m.get(s,function(u){setTimeout(function(){if(!u){n.error('fetch_failure',{id:s});return;}var v=i.getDialog(u);if(!v){n.error('no_hovercard',{id:s,endpoint:u});return;}if(s==t.getActiveID())t.showHovercard(s,v);},0);});}function p(s,t){var u=[];function v(y){if(y>=0&&y<s.length)u.push(s[y]);}var w=s.indexOf(t);if(w>-1){v(w);for(var x=1;x<l;x++){v(w+x);v(w-x);}}return u.filter(function(y){return y;});}function q(s,t){var u=t.getActiveID();if(u){var v=s.getShowingUsers(),w=p(v,u);m.get(w,function(){});}}function r(s){var t=s.getHoverController();t.registerDefault(o);t.subscribe('hover',k(q.bind(null,s,t),100));}e.exports=r;});
__d("ChatImpressionLogger",["AvailableList","AsyncSignal","ChatConfig","ChatVisibility","Poller"],function(a,b,c,d,e,f){var g=b('AvailableList'),h=b('AsyncSignal'),i=b('ChatConfig'),j=b('ChatVisibility'),k=b('Poller'),l=null,m=null,n={init:function(o){l=o;var p=i.get('chat_impression_logging_periodical',0);if(p){var q=i.get('periodical_impression_logging_config.interval');m=new k({interval:q,setupRequest:this.logImps.bind(this),clearOnQuicklingEvents:false});}this.init=function(){};},logImps:function(o){if(!j.isOnline())return;var p={source:'periodical_imps'},q=l.getCachedSortedList(),r=[];for(var s=0;s<q.length;s++)r[s]=g.get(q[s]);p.sorted_list=q.toString();p.list_availability=r.toString();o.setURI('/ajax/chat/imps_logging.php').setData(p);},getOrderedList:function(){return l;},logImpressions:function(o){var p=[],q=[];if(i.get('chat_impression_logging_with_click')){p=l.getCachedSortedList();for(var r=0;r<p.length;r++)q[r]=g.get(p[r]);}o.sorted_list=p.toString();o.list_availability=q.toString();new h('/ajax/chat/ct.php',o).send();}};e.exports=n;});
__d("ChatOptions",["Arbiter","ChannelConstants","JSLogger","PresenceUtil","copyProperties","ChatOptionsInitialData"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('ChannelConstants'),i=b('JSLogger'),j=b('PresenceUtil'),k=b('copyProperties'),l=i.create('chat_options'),m={};(function(){var o=b('ChatOptionsInitialData');for(var p in o){var q=o[p];m[p]=!!q;}})();var n=k(new g(),{getSetting:function(o){return m[o];},setSetting:function(o,p,q){if(this.getSetting(o)==p)return;if(q){q='from_'+q;l.log(q,{name:o,new_value:p,old_value:this.getSetting(o)});}m[o]=!!p;g.inform('chat/option-changed',{name:o,value:p});}});g.subscribe(h.getArbiterType('setting'),function(o,p){var q=p.obj;if(q.window_id===j.getSessionID())return;n.setSetting(q.setting,!!q.value,'channel');});g.subscribe(i.DUMP_EVENT,function(o,p){p.chat_options=m;});e.exports=n;});
__d("ChatOrderedListHover",["ArbiterMixin","CSS","ErrorUtils","Event","LayerHideOnBlur","Parent","copyProperties","cx","mixin","setTimeoutAcrossTransitions","shield"],function(a,b,c,d,e,f){var g=b('ArbiterMixin'),h=b('CSS'),i=b('ErrorUtils'),j=b('Event'),k=b('LayerHideOnBlur'),l=b('Parent'),m=b('copyProperties'),n=b('cx'),o=b('mixin'),p=b('setTimeoutAcrossTransitions'),q=b('shield');function r(x){h.addClass(x,'fetching');}function s(x){h.removeClass(x,'fetching');}var t=o(g);for(var u in t)if(t.hasOwnProperty(u))w[u]=t[u];var v=t===null?null:t.prototype;w.prototype=Object.create(v);w.prototype.constructor=w;w.__superConstructor__=t;function w(x){"use strict";this._orderedList=x;this._root=x.getRoot();j.listen(this._root,'mouseover',this._mouseOver.bind(this));j.listen(this._root,'mouseleave',this._mouseLeave.bind(this));x.subscribe('click',q(this._hide,this));}w.prototype._mouseOver=function(event){"use strict";if(this._paused)return;var x=event.getTarget(),y=l.byClass(x,"_42fz")||l.byClass(x,"_5a58");y&&this._setActiveItem(y);};w.prototype._mouseLeave=function(event){"use strict";this._setActiveItem(null);};w.prototype._clearTimeouts=function(){"use strict";this._showTimeout&&clearTimeout(this._showTimeout);this._showTimeout=null;this._hideTimeout&&clearTimeout(this._hideTimeout);this._hideTimeout=null;};w.prototype._hide=function(){"use strict";if(this._showingDialog){this._showingDialog.hide();this._showingDialog=null;this._showingID=null;}};w.prototype._show=function(){"use strict";var x=this.getActiveID(),y=false;if(this._handlers[x]){y=true;i.applyWithGuard(this._handlers[x],{},[x,this]);}else if(this._defaultHandler){y=true;i.applyWithGuard(this._defaultHandler,{},[x,this]);}if(y&&this._showingID!=this.getActiveID())r(this._activeItem);};w.prototype._setActiveItem=function(x){"use strict";if(x!=this._activeItem){this._clearTimeouts();this._activeItem&&s(this._activeItem);this._activeItem=null;var y=x?0:100;this._hideTimeout=p(function(){if(this.getActiveID()!=this._showingID)this._hide();}.bind(this),y);if(x){this._activeItem=x;var z=y+500;this._showTimeout=p(function(){this._show();}.bind(this),z);this.inform('hover');}else this.inform('leave');}};w.prototype.register=function(x,y){"use strict";if(!this._handlers[x]){this._handlers[x]=y;return {unregister:function(){if(x==this._showingID)this._hide();delete this._handlers[x];var z=this._orderedList.getAllNodes(),aa=z[x];aa&&s(aa);}.bind(this)};}};w.prototype.registerDefault=function(x){"use strict";this._defaultHandler=x;};w.prototype.getActiveID=function(){"use strict";var x=this._activeItem&&this._orderedList.getUserForNode(this._activeItem);return x||null;};w.prototype.showHovercard=function(x,y){"use strict";if(x==this.getActiveID()&&x!=this._showingID){this._clearTimeouts();s(this._activeItem);this._hide();this._showingDialog=y;this._showingID=x;var z=y.subscribe('mouseenter',this._setActiveItem.bind(this,this._activeItem)),aa=y.subscribe('mouseleave',function(){z.unsubscribe();this._setActiveItem(null);}.bind(this)),ba=y.subscribe('hide',function(){this.inform('hovercard_hide');z.unsubscribe();aa.unsubscribe();ba.unsubscribe();}.bind(this));y.enableBehavior(k).setContext(this._activeItem).setPosition('left').show();this.inform('hovercard_show');}};m(w.prototype,{_root:null,_activeItem:null,_hideTimeout:null,_showTimeout:null,_showingDialog:null,_showingID:null,_handlers:{},_defaultHandler:null});e.exports=w;});
__d("ChatQuietLinks",["Event","DOM","UserAgent","DataStore","Parent"],function(a,b,c,d,e,f){var g=b('Event'),h=b('DOM'),i=b('UserAgent'),j=b('DataStore'),k=b('Parent'),l={},m={silenceLinks:function(q){n(q,this.removeEmptyHrefs.bind(this));},nukeLinks:function(q){n(q,this.removeAllHrefs.bind(this));},removeEmptyHrefs:function(q){o(q,function(r){return !r||r==='#';});},removeAllHrefs:function(q){o(q);}};function n(q,r){var s=!!i.chrome(),t=!!i.chrome()||i.ie()>=9||i.firefox()>=4;if(l[h.getID(q)])return;l[h.getID(q)]=true;if(!t)return;if(!s){r&&r(q);return;}g.listen(q,'mouseover',function u(v){var w=k.byTag(v.getTarget(),'a');if(w){var x=w.getAttribute('href');if(p(x)){j.set(w,'stashedHref',w.getAttribute('href'));w.removeAttribute('href');}}});g.listen(q,'mouseout',function u(v){var w=k.byTag(v.getTarget(),'a'),x=w&&j.remove(w,'stashedHref');if(p(x))w.setAttribute('href',x);});g.listen(q,'mousedown',function(u){if(!u.isDefaultRequested())return true;var v=k.byTag(u.getTarget(),'a'),w=v&&j.get(v,'stashedHref');if(p(w))v.setAttribute('href',w);});}function o(q,r){var s=h.scry(q,'a');if(r)s=s.filter(function(t){return r(t.getAttribute('href'));});s.forEach(function(t){t.removeAttribute('href');t.setAttribute('tabindex',0);});}function p(q){return q&&q!=='#';}e.exports=m;});
__d("ChatSidebarConstants",["ChatConfig","mergeInto"],function(a,b,c,d,e,f){var g=b('ChatConfig'),h=b('mergeInto'),i={LITESTAND_IMAGE_SIZE:24,LITESTAND_CLASSIC_SIZE:32,IMAGE_SIZE:28};h(i,{getImageSize:function(){if(g.get('litestand_blended_sidebar')||g.get('litestand_classic_sidebar'))return i.LITESTAND_CLASSIC_SIZE;if(g.get('litestand'))return i.LITESTAND_IMAGE_SIZE;return i.IMAGE_SIZE;}});e.exports=i;});
__d("ChatSidebarItem.react",["AvailableListConstants","ChatConfig","ChatSidebarConstants","Image.react","Link.react","React","SplitImage.react","cx","ix"],function(a,b,c,d,e,f){var g=b('AvailableListConstants'),h=b('ChatConfig'),i=b('ChatSidebarConstants'),j=b('Image.react'),k=b('Link.react'),l=b('React'),m=b('SplitImage.react'),n=b('cx'),o=b('ix'),p=9,q=l.createClass({displayName:'ChatSidebarItem',render:function(){var r=(("_55ln")+(this.props.context?' '+"_55lo":'')+(this.props.unreadCount&&h.get('litestand_buddylist_count')?' '+"_5bom":'')),s=null;if(h.get('litestand',0))s=l.DOM.div({'aria-label':this.props.name,className:"_4_vf",'data-hover':"tooltip",'data-tooltip-position':"right"});return (k({className:r,href:this.props.href,onClick:this.props.onClick,rel:"ignore"},l.DOM.div({className:"_55lp"},l.DOM.div({className:"_56p9"},this.renderImage(),l.DOM.div({className:"_568w"})),l.DOM.div({className:"_5bon"},this.renderBirthday(),this.renderUnreadCount(),this.renderStatus()),l.DOM.div({className:"_55lr"},this.props.name),l.DOM.div({className:"_55ls"},this.props.context)),s));},renderImage:function(){var r=this.props.imageSize||i.IMAGE_SIZE;return m({size:r,srcs:this.props.images});},renderUnreadCount:function(){var r=this.props.unreadCount;if(!r||!h.get('litestand_buddylist_count'))return null;var s=(("_5boo")+(r>p?' '+"_5bop":''));if(r>p)r=p+'+';return (l.DOM.div({className:s},r));},renderStatus:function(){var r=this.getStatusSrc();if(!r&&!this.props.statusTime)return null;if(this.props.unreadCount&&h.get('litestand_blended_sidebar')&&h.get('litestand_buddylist_count'))return;var s=r?j({className:"_568_",src:r}):null;return (l.DOM.div({className:"_568z"},l.DOM.div({className:"_568-"},this.props.statusTime),l.DOM.div({className:"_5t35"},this.props.detailedStatus),s));},renderBirthday:function(){if(!this.props.birthday)return null;var r=o('/images/gifts/icons/cake_icon.png');if(h.get('gray_cake'))r=o('/images/chat/sidebar/livebar/divebar_cake.png');return (j({className:"_5dv3",src:r}));},getStatusSrc:function(){switch(this.props.status){case g.ACTIVE:case g.IDLE:return h.get('litestand_classic_sidebar')?o('/images/litestand_classic/sidebar/online.png'):o('/images/chat/status/online.png');case g.MOBILE:if(h.get('sidebar_remove_mobile_icon'))return null;return h.get('litestand_classic_sidebar')?o('/images/litestand_classic/sidebar/pushable.png'):o('/images/chat/status/mobile.png');}return null;}});e.exports=q;});
__d("ChatSidebarThread.react",["ChatSidebarItem.react","WebMessengerPermalinkConstants","React","MercuryThreadMetadataRawRenderer"],function(a,b,c,d,e,f){var g=b('ChatSidebarItem.react'),h=b('WebMessengerPermalinkConstants'),i=b('React'),j=b('MercuryThreadMetadataRawRenderer'),k=i.createClass({displayName:'ChatSidebarThread',render:function(){var n=this.props.name,o=l(this.props.threadID,this.props.participants),p=n?o:undefined,q=h.getURIPathForThreadID(this.props.threadID),r=m(this.props.image,this.props.participants),s=n?n:o;return (g({context:p,href:{url:q},imageSize:this.props.imageSize,images:r,name:s,status:this.props.status,unreadCount:this.props.unreadCount}));}});function l(n,o){return j.renderRawParticipantList(n,o,o.length,{names_renderer:j.renderShortNames});}function m(n,o){if(n)return n;return o.map(function(p){return p.image_src;});}e.exports=k;});
__d("ChatSidebarThreadlist.react",["ChatConfig","ChatGroupThreadsController","ChatSidebarConstants","ChatSidebarItem.react","ChatSidebarThread.react","MercuryServerRequests","MercuryThreads","MercuryParticipants","PresenceStatus","React","copyProperties","cx","fbt","ix"],function(a,b,c,d,e,f){var g=b('ChatConfig'),h=b('ChatGroupThreadsController'),i=b('ChatSidebarConstants'),j=b('ChatSidebarItem.react'),k=b('ChatSidebarThread.react'),l=b('MercuryServerRequests').get(),m=b('MercuryThreads').get(),n=b('MercuryParticipants'),o=b('PresenceStatus'),p=b('React'),q=b('copyProperties'),r=b('cx'),s=b('fbt'),t=b('ix');function u(){if(g.get('litestand_blended_sidebar')||g.get('litestand_classic_sidebar')){return t('/images/litestand/sidebar/blended/new_group_chat.png');}else if(g.get('litestand')){return t('/images/chat/sidebar/newGroupChatLitestand.png');}else return t('/images/chat/sidebar/newGroupChat.png');}var v=p.createClass({displayName:'ChatSidebarThreadlist',render:function(){var w=this.state.threadData,x=this.state.participantData,y=i.getImageSize(),z=u(),aa="\u041d\u043e\u0432\u0430\u044f \u0433\u0440\u0443\u043f\u043f\u043e\u0432\u0430\u044f \u043f\u0435\u0440\u0435\u043f\u0438\u0441\u043a\u0430...";aa=g.get('divebar_group_new_button_name',aa);var ba=[];ba.push(p.DOM.li({className:(("_56yg")+(' '+"_56yj")+(this.props.offlineItems?' '+"_570-":'')),key:"new"},j({images:z,imageSize:y,name:aa})));var ca={};for(var da in w){var ea=w[da],fa=ea.participants.map(function(ja){return (x||{})[ja];}).filter(function(ja){return ja;}),ga=ea.participants.map(function(ja){return n.getUserID(ja);}),ha=ga.sort().join('|');if(!ca[ha]&&fa.length){ca[ha]=1;var ia=l.getServerThreadIDNow(da);ba.push(p.DOM.li({className:(("_5a58")+(' '+"_56yg")+(this.props.offlineItems?' '+"_570-":'')),'data-serverthreadid':ia,'data-threadid':da,key:da},k({image:ea.image_src,imageSize:y,name:ea.name,participants:fa,status:o.getGroup(ga),threadID:da,unreadCount:ea.unread_count})));}}return p.DOM.ul(null,ba);},getInitialState:function(){return {};},componentWillMount:function(){var w=function(){this.setState(this._calculateState());}.bind(this);this.token=h.subscribe('update',w);w();},componentWillUnmount:function(){this.token&&this.token.unsubscribe();this.token=null;},_calculateState:function(){var w=false,x={},y={},z=h.getThreadIDs(),aa=z.length;z.forEach(function(ca){m.getThreadMeta(ca,function(da){y[ca]=da;n.getMulti(da.participants,function(ea){delete ea[n.user];if(w){this.setState(this._calculateState());}else q(x,ea);aa--;}.bind(this));}.bind(this));}.bind(this));if(aa===0){return {threadData:y,participantData:x};}else{w=true;var ba=this.state||{};return {threadData:q(ba.threadData,y),participantData:q(ba.participantData,x)};}}});e.exports=v;});
__d("OrderedFriendsList",["AvailableList","ChatConfig","createArrayFrom","ShortProfiles","InitialChatFriendsList"],function(a,b,c,d,e,f){var g=b('AvailableList'),h=b('ChatConfig'),i=b('createArrayFrom'),j=b('ShortProfiles'),k=[],l={},m=[],n={contains:function(o){return o in l;},getList:function(){if(h.get('chat_web_ranking_with_presence'))n.reRank();var o=i(k);o=o.filter(function(p){var q=j.getNowUnsafe(p);return !q||q.type=="friend";});return o;},getRank:function(o){return o in l?l[o]:k.length;},reRank:function(){var o={},p={};m.forEach(function(r,s){var t=r.substr(0,r.length-2),u=r.substring(r.length-1);if(typeof(p.uid)=='undefined'){if(typeof(o.uid)=='undefined')o[t]=g.get(t);var v=o[t];if(v==u)p[s]=t;}});k=[];for(var q in p)k.push(p[q]);k.forEach(function(r,s){l[r]=s;});}};(function(){var o=b('InitialChatFriendsList');k=o.list.length?o.list:[];if(h.get('chat_web_ranking_with_presence')){m=k.slice();n.reRank();}k.forEach(function(p,q){l[p]=q;});})();e.exports=a.OrderedFriendsList||n;});
__d("ChatSortUsers",["AvailableListConstants","OrderedFriendsList","PresencePrivacy","PresenceStatus","ShortProfiles","TokenizeUtil"],function(a,b,c,d,e,f){var g=b('AvailableListConstants'),h=b('OrderedFriendsList'),i=b('PresencePrivacy'),j=b('PresenceStatus'),k=b('ShortProfiles'),l=b('TokenizeUtil');function m(q,r){var s=i.allows(q),t=i.allows(r);if(s!==t)return s?-1:1;return 0;}var n={};function o(q){if(n[q])return n[q];var r=(k.getNowUnsafe(q)||{}).name;if(r)return n[q]=l.flatten(r);return '~';}var p={sortAlphabetical:function(q,r){var s=o(q),t=o(r);if(s!==t)return s<t?-1:1;return 0;},sortMobile:function(q,r){var s=j.get(q)===g.MOBILE,t=j.get(r)===g.MOBILE;if(s!==t)return t?-1:1;return p.sortAlphabetical(q,r);},sortCoefficient:function(q,r){var s=h.getRank(q),t=h.getRank(r);if(s!==t)return s-t;return p.sortAlphabetical(q,r);},sort:function(q,r){var s=m(q,r);if(s!==0)return s;return p.sortCoefficient(q,r);}};e.exports=p;});
__d("ChatUnreadCount",["ArbiterMixin","MercuryThreadInformer","MercuryThreads","copyProperties"],function(a,b,c,d,e,f){var g=b('ArbiterMixin'),h=b('MercuryThreadInformer').get(),i=b('MercuryThreads').get(),j=b('copyProperties'),k={};h.subscribe('threads-updated',function(l,m){for(var n in m){var o=i.getCanonicalUserInThread(n);k.inform('unread-changed',o);}});j(k,g,{getUnreadCountForUID:function(l,m){i.getThreadMeta(i.getThreadIdForUser(l),function(n){m(n.unread_count);});}});e.exports=k;});
__d("ChatOrderedList",["Animation","Arbiter","ArbiterMixin","AsyncDialog","AsyncRequest","AvailableList","AvailableListConstants","CSS","Chat","ChatConfig","ChatContexts","ChatGroupThreadsController","ChatOrderedListHover","ChatQuietLinks","ChatSidebarThreadlist.react","ChatSortUsers","ChatTypeaheadConstants","ChatUnreadCount","ChatVisibility","DOM","DataStore","Event","ImageSourceRequest","ImageSourceType","JSLogger","JSXDOM","LastMobileActiveTimes","MercuryParticipantTypes","OrderedFriendsList","Parent","PhotoResizeModeConst","PresencePrivacy","PresenceStatus","React","ShortProfiles","Style","Tooltip","URI","Vector","XHPTemplate","copyProperties","createObjectFrom","csx","cx","debounceAcrossTransitions","guid","ix","requestAnimationFrame","runAfterScrollingStops","shield","tx","mixin","ChannelImplementation"],function(a,b,c,d,e,f){var g=b('Animation'),h=b('Arbiter'),i=b('ArbiterMixin'),j=b('AsyncDialog'),k=b('AsyncRequest'),l=b('AvailableList'),m=b('AvailableListConstants'),n=b('CSS'),o=b('Chat'),p=b('ChatConfig'),q=b('ChatContexts'),r=b('ChatGroupThreadsController'),s=b('ChatOrderedListHover'),t=b('ChatQuietLinks'),u=b('ChatSidebarThreadlist.react'),v=b('ChatSortUsers'),w=b('ChatTypeaheadConstants'),x=b('ChatUnreadCount'),y=b('ChatVisibility'),z=b('DOM'),aa=b('DataStore'),ba=b('Event'),ca=b('ImageSourceRequest'),da=b('ImageSourceType'),ea=b('JSLogger'),fa=b('JSXDOM'),ga=b('LastMobileActiveTimes'),ha=b('MercuryParticipantTypes'),ia=b('OrderedFriendsList'),ja=b('Parent'),ka=b('PhotoResizeModeConst'),la=b('PresencePrivacy'),ma=b('PresenceStatus'),na=b('React'),oa=b('ShortProfiles'),pa=b('Style'),qa=b('Tooltip'),ra=b('URI'),sa=b('Vector'),ta=b('XHPTemplate'),ua=b('copyProperties'),va=b('createObjectFrom'),wa=b('csx'),xa=b('cx'),ya=b('debounceAcrossTransitions'),za=b('guid'),ab=b('ix'),bb=b('requestAnimationFrame'),cb=b('runAfterScrollingStops'),db=b('shield'),eb=b('tx'),fb=b("mixin"),gb=b('ChannelImplementation').instance,hb=null,ib,jb=9,kb=fb(i);for(var lb in kb)if(kb.hasOwnProperty(lb))nb[lb]=kb[lb];var mb=kb===null?null:kb.prototype;nb.prototype=Object.create(mb);nb.prototype.constructor=nb;nb.__superConstructor__=kb;function nb(ob,pb,qb,rb,sb){"use strict";this._isSidebar=ob;this._isLeftCollapsedSidebar=!!ja.byClass(pb,"_5ap0");this._root=pb;this._itemsMap={};this._isVisible=false;this._excludedIds={};this._numTopFriends=5;this._hasRendered=false;this._preventRendering=false;this._hoverController=null;this._template=qb;this._messageTemplate=rb;this._contextualDialog=sb;this._cachedItemHeight=null;this._cachedItemPadding=null;if(p.get('groups_in_divebar')){this._groupThreadsNode=fa.li({className:"_56yf"});this._updateGroupThreads();}this._orderedList=z.find(this._root,'.fbChatOrderedList');this._scrollableOrderedList=ja.byClass(this._root,'scrollableOrderedList');this._chatSidebar=ja.byClass(this._root,'fbChatSidebar');this._scrollableArea=ja.byClass(this._root,'scrollable');ba.listen(this._root,'click',this._onClick.bind(this));ba.listen(this._root,'mouseenter',this._mouseEnter.bind(this));ba.listen(this._root,'mouseleave',this._mouseLeave.bind(this));if(this._editButton)ba.listen(this._editButton,'click',this.toggleEditMode.bind(this));l.subscribe(m.ON_AVAILABILITY_CHANGED,db(this.update,this));la.subscribe('privacy-changed',db(this.update,this));gb.subscribe([gb.CONNECTED,gb.RECONNECTING,gb.SHUTDOWN,gb.MUTE_WARNING,gb.UNMUTE_WARNING],db(this.update,this));this.inform('initialized',this,h.BEHAVIOR_PERSISTENT);this.render();h.subscribe(ea.DUMP_EVENT,function(tb,ub){ub.chat_lists=ub.chat_lists||{sorted_list:this.getCachedSortedList(),ordered_list:ia.getList(),available_list:nb.getAvailableList(this._excludedIds),excluded_list:this._excludedIds};}.bind(this));h.subscribe('ChatOrderedList/itemHeightChange',function(){this._cachedItemHeight=null;this._cachedItemPadding=null;}.bind(this));this._renderUnreadCount=p.get('divebar_message_count');if(this._renderUnreadCount)x.subscribe('unread-changed',function(tb,ub){if(!this._renderedTopUsers||!(ub in this._renderedTopUsers)||!this._itemsMap[ub])return;x.getUnreadCountForUID(ub,this._updateUnreadCount.bind(this,ub));}.bind(this));}nb.prototype.getAllNodes=function(){"use strict";var ob={},pb=z.scry(this._root,"li._42fz");for(var qb=0;qb<pb.length;qb++){var rb=aa.get(pb[qb],'id');if(rb)ob[rb]=pb[qb];}return ob;};nb.prototype.getShowingUsers=function(){"use strict";return z.scry(this._root,"li._42fz,li._5a58").map(this.getUserForNode);};nb.prototype.getUserForNode=function(ob){"use strict";return aa.get(ob,'id')||aa.get(ob,'serverthreadid');};nb.prototype.getHoverController=function(){"use strict";if(!this._hoverController)this._hoverController=new s(this,this._contextualDialog);return this._hoverController;};nb.prototype.getPaddingOffset=function(){"use strict";return 8;};nb.prototype._calculateItemMeasurements=function(){"use strict";var ob=this._orderedList,pb=this._template.build(),qb=pb.getRoot();z.setContent(pb.getNode('name'),'test');qb.style.visibility='hidden';z.appendContent(ob,qb);this._cachedItemHeight=sa.getElementDimensions(qb).y;this._cachedItemPadding=pa.getFloat(pb.getNode('anchor'),'padding')||0;z.remove(qb);};nb.prototype.getItemHeight=function(){"use strict";if(this._cachedItemHeight===null)this._calculateItemMeasurements();return this._cachedItemHeight;};nb.prototype.getItemPadding=function(){"use strict";if(this._cachedItemPadding===null)this._calculateItemMeasurements();return this._cachedItemPadding;};nb.prototype._updateGroupThreads=function(){"use strict";if(this._groupThreadsNode){var ob=la.getVisibility(),pb=u({offlineItems:gb.disconnected()||!ob});na.renderComponent(pb,this._groupThreadsNode);}};nb.prototype._getListItem=function(ob){"use strict";var pb=this._itemsMap[ob];if(!pb)return;var qb=ma.get(ob),rb=ma.isBirthday(ob),sb=la.allows(ob)&&!gb.disconnected();if(pb.contextNode===undefined){pb.contextNode=z.find(pb.node,"._52zk");pb.timeNode=z.scry(pb.node,'.active_time')[0];pb.statusNodes=z.scry(pb.node,'img.status');pb.detailedPresenceNode=z.scry(pb.node,"._5t30")[0];}var tb={active:false,mobile:false,birthday:false};tb.active=qb===m.ACTIVE;tb.mobile=qb===m.MOBILE;tb.birthday=rb;if(tb.mobile){var ub=ga.getShortDisplay(ob);if(pb.timeNode&&pb.lastActiveTime!==ub){pb.lastActiveTime=ub;z.setContent(pb.timeNode,ub);if(p.get('sidebar_remove_mobile_icon'))pb.statusNodes.map(n.hide);}}else if(pb.lastActiveTime){pb.lastActiveTime=null;z.empty(pb.timeNode);}if(tb.active){if(p.get('sidebar_remove_mobile_icon'))pb.statusNodes.map(n.show);var vb=ma.getDetailedActivePresence(ob);if(pb.detailedPresenceNode&&vb){z.setContent(pb.detailedPresenceNode,vb);z.empty(pb.timeNode);}}else if(pb.detailedPresenceNode)z.empty(pb.detailedPresenceNode);if(p.get('sidebar_remove_mobile_icon'))tb.mobile=false;for(var wb in tb)n.conditionClass(pb.node,wb,tb[wb]&&sb);n.conditionClass(pb.node,'invis',!sb);var xb=n.hasClass(document.documentElement,'highContrast');pb.statusNodes.forEach(function(yb){if(qb===m.ACTIVE&&sb){yb.alt="\u0412 \u0441\u0435\u0442\u0438";if(xb)yb.src=ab('/images/chat/status/online.png');}else if(qb===m.MOBILE&&sb){yb.alt="\u041c\u043e\u0431\u0438\u043b\u044c\u043d\u044b\u0439";if(xb)yb.src=ab('/images/chat/status/mobile.png');}else{yb.alt='';if(xb)yb.src=ab('/images/spacer.gif');}});this._applyContext(ob,pb);return pb.node;};nb.prototype.getRoot=function(){"use strict";return this._root;};nb.prototype.getSortedList=function(ob){"use strict";return nb.getSortedList(ob||this._excludedIds,this._numTopFriends);};nb.prototype.getCachedSortedList=function(ob){"use strict";if(hb==null)hb=this.getSortedList(ob);return hb;};nb.prototype.hide=function(){"use strict";if(!this._isVisible)return;this._isVisible=false;n.hide(this._scrollableOrderedList||this._root);this.inform('hide');};nb.prototype._getChatTabOpenLogData=function(ob){"use strict";var pb=n.hasClass(document.documentElement,'sidebarMode'),qb={mode:pb?'sidebar':'chatNub',typehead:false};if(this._scrollableArea&&this._scrollContainer){var rb=sa.getElementPosition(this._scrollableArea,'viewport').y,sb=sa.getElementPosition(ob,'viewport').y,tb=this._scrollContainer.scrollTop;if(sb>rb){qb.visible_slot=Math.round((sb-rb)/32);var ub=Math.round(tb/32);qb.global_slot=qb.visible_slot+ub;}}if(pb){qb.sidebar_height=this._chatSidebar&&this._chatSidebar.clientHeight;if(this._scrollContainer)qb.buddylist_height=this._scrollContainer.clientHeight;}return qb;};nb.prototype._onClick=function(event){"use strict";var ob=event.getTarget(),pb=ja.byTag(ob,'li');if(pb){if(n.hasClass(pb,'blackbirdWhitelist')){var qb=new ra('/ajax/chat/privacy/settings_dialog.php').addQueryData({ref:'whitelist_separator'});j.send(new k(qb));event.prevent();return false;}var rb=aa.get(pb,'id'),sb=n.hasClass(pb,"_56yg");if(rb||sb){var tb=this._getChatTabOpenLogData(pb),ub=n.hasClass(document.documentElement,'sidebarMode'),vb=la.getOnlinePolicy()===la.ONLINE_TO_WHITELIST,wb=vb?'white_list':'ordered_list';if(sb){rb=pb.getAttribute('data-threadid');wb=rb?'recent_threads_in_divebar':'recent_threads_in_divebar_new';}else while(pb.previousSibling){pb=pb.previousSibling;if(n.hasClass(pb,"_554m")){if(n.hasClass(pb,'moreOnlineFriends')){wb='more_online_friends';break;}if(n.hasClass(pb,'blackbirdWhitelist')){wb='blackbird_offline_section';break;}}}tb.source=wb;var xb=sb?w.THREAD_TYPE:ha.FRIEND;o.openTab(rb,xb,tb);this.inform('click',{id:rb});}else if(n.hasClass(pb,"_554m")&&ja.byClass(ob,"_554n"))this.scrollTo(pb);return false;}};nb.prototype._mouseEnter=function(){"use strict";this._preventRendering=true;};nb.prototype._mouseLeave=function(){"use strict";this._preventRendering=false;};nb.prototype.setExcludedIds=function(ob){"use strict";this._excludedIds=va(ob||[]);};nb.prototype.setNumTopFriends=function(ob){"use strict";if(ob!==this._numTopFriends){this._numTopFriends=ob;this.render();}};nb.prototype._getOfflineToSectionItems=function(){"use strict";var ob='subheader-text-'+za(),pb=z.create('a',{href:'#','aria-describedby':ob},z.tx._("\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c")),qb=[],rb=z.tx._("\u0414\u0420\u0423\u0413\u0418\u0415 \u0414\u0420\u0423\u0417\u042c\u042f");qb.push(fa.li({className:"_554m"},fa.div({className:"_554o"},fa.div({className:"_554n"},fa.span({className:"_554p"},rb),fa.div({className:"_554q"},fa.span({className:"_554r"}))))));qb.push(fa.li({className:"_554m blackbirdWhitelist"},fa.div({className:"_554o"},fa.div({className:"_554n"},fa.div({className:"_5v-d"},fa.span({id:ob,className:"_554t"},eb._("\u042d\u0442\u0438 \u0434\u0440\u0443\u0437\u044c\u044f \u043d\u0435 \u043c\u043e\u0433\u0443\u0442 \u0432\u0438\u0434\u0435\u0442\u044c \u0432\u0430\u0441 \u0432 \u0447\u0430\u0442\u0435. {=link}",{'=link':pb})))))));return qb;};nb.prototype._renderOrderedList=function(){"use strict";if(!this._isVisible||(this._preventRendering&&this._hasRendered)||ib)return;this._hasRendered=true;this._cachedItems=null;var ob=[],pb,qb,rb=p.get('groups_in_divebar');rb&&this._updateGroupThreads();var sb=rb&&r.getThreadIDs().length,tb=sb||0;if(sb)tb++;var ub,vb,wb=nb.getSortedList({},Math.max(0,this._numTopFriends-tb));if(sb)this._groupThreadsNode&&ob.push(this._groupThreadsNode);var xb=la.getVisibility()&&la.getOnlinePolicy()==la.ONLINE_TO_WHITELIST;for(var yb=0,zb=wb.length;yb<zb;yb++){pb=wb[yb];if(xb)if(!la.allows(pb)){if(yb+2>=wb.length)break;xb=false;var ac=this._getOfflineToSectionItems();ob.push(ac[0]);ob.push(ac[1]);zb-=2;}qb=this._getListItem(pb);if(qb){ob.push(qb);}else this._renderListItem(pb,this.render.bind(this));}var bc=nb.getAvailableList(this._excludedIds),cc=wb,dc=va(cc);bc=bc.filter(function(lc){return !(lc in dc);});if(this._renderUnreadCount){var ec=[];if(this._renderedTopUsers){var fc=Object.keys(this._renderedTopUsers).filter(function(lc){return !(lc in dc);});fc.forEach(function(lc){this._updateUnreadCount(lc,0);}.bind(this));cc.forEach(function(lc){if(!(lc in this._renderedTopUsers))ec.push(lc);}.bind(this));}else ec=cc;var gc=this._updateUnreadCount.bind(this);ec.forEach(function(lc){x.getUnreadCountForUID(lc,function(mc){gc(lc,mc);});});this._renderedTopUsers=dc;}if(p.get('divebar_show_mobile_more_friends_alphabetical')){bc.sort(v.sortAlphabetical);}else bc.sort(v.sortMobile);var hc="\u0414\u0420\u0423\u0413\u0418\u0415 \u0414\u0420\u0423\u0417\u042c\u042f";if(bc.length&&ob.length){var ic=eb._("{MORE ONLINE FRIENDS} ({=count})",{'MORE ONLINE FRIENDS':hc,'=count':bc.length});}else ic=eb._("{MORE ONLINE FRIENDS} ({=count})",{'MORE ONLINE FRIENDS':hc,'=count':bc.length});ob.push(fa.li({className:"_554m moreOnlineFriends"},fa.div({className:"_554o"},fa.div({className:"_554n"},fa.span({className:"_554p"},ic),fa.div({className:"_554q"},fa.span({className:"_554r"}))))));for(ub=0,vb=bc.length;ub<vb;ub++){pb=bc[ub];qb=this._getListItem(pb);if(qb){ob.push(qb);}else this._renderListItem(pb,this.render.bind(this));}if(!wb.length&&!bc.length&&!tb){var jc=this._messageTemplate.render(),kc=ta.getNode(jc,'message');z.setContent(kc,"\u0412 \u0447\u0430\u0442\u0435 \u043d\u0438\u043a\u043e\u0433\u043e \u043d\u0435\u0442.");ob.push(jc);}if(ob.length){z.setContent(this._orderedList,ob);t.nukeLinks(this.getRoot());this.inform('render');if(!this._renderingAfterScroll){this._renderingAfterScroll=true;this.render=ya(cb.bind(null,this._renderOrderedList.bind(this),'ChatOrderedList/render',true),300);}}};nb.prototype.render=function(){"use strict";this.render=ya(this._renderOrderedList.bind(this),300);this.render();};nb.prototype._renderListItem=function(ob,pb){"use strict";oa.get(ob,function(qb){var rb=this._template.render(),sb=ta.getNode(rb,'profile-photo');if(p.get('chat_use_client_side_image_requests',0)){var tb=28;new ca().setFBID(qb.id).setType(da.PROFILE_PICTURE).setDimensions(tb,tb).setResizeMode(ka.COVER).setCallback(function(yb){sb.setAttribute('src',yb.uri);}).send();}else sb.setAttribute('src',qb.thumbSrc);var ub=ta.getNode(rb,'name');z.setContent(ub,qb.name);var vb=ta.getNode(rb,'accessible-name');z.setContent(vb,qb.name);var wb=ta.getNode(rb,'anchor');wb.setAttribute('href','/messages/'+ob);var xb=ta.getNode(rb,'tooltip');xb&&qa.set(xb,qb.name,'right');aa.set(rb,'id',ob);this._itemsMap[ob]={node:rb};pb&&pb(rb);}.bind(this));};nb.prototype._updateUnreadCount=function(ob,pb){"use strict";var qb=this._itemsMap[ob];if(!qb)return;if(this._isSidebar){this._unreadMessages=this._unreadMessages||{};if(!!pb){this._unreadMessages[ob]=true;}else delete this._unreadMessages[ob];h.inform('buddylist-nub/updateCount',{count:Object.keys(this._unreadMessages).length});}qb.unreadCount=qb.unreadCount||z.find(qb.node,"._550_");pb=pb?pb:0;z.setContent(qb.unreadCount,pb>jb?jb+'+':pb);n.conditionClass(qb.unreadCount,"_550z",pb>jb);n.conditionClass(qb.node,"_550-",pb);};nb.prototype.show=function(){"use strict";if(this._isVisible)return;this._isVisible=true;n.show(this._scrollableOrderedList||this._root);this.render();this.inform('show');};nb.prototype.isVisible=function(){"use strict";return this._isVisible;};nb.prototype.update=function(){"use strict";this._hasRendered=false;if(!this._renderRequest)this._renderRequest=bb(function(){this.render();this._renderRequest=null;}.bind(this));};nb.prototype.setScrollContainer=function(ob){"use strict";if(z.contains(ob,this._root))this._scrollContainer=ob;};nb.prototype.scrollTo=function(ob){"use strict";if(!this._scrollContainer)return;var pb=this._scrollContainer.scrollHeight,qb=this._scrollContainer.clientHeight,rb=this._scrollContainer.scrollTop,sb=Math.min(ob.offsetTop,pb-qb);if(rb!==sb){var tb=Math.abs(sb-rb)/this._scrollContainer.clientHeight*500;new g(this._scrollContainer).to('scrollTop',sb).ease(g.ease.end).duration(tb).go();}};nb.prototype._applyContext=function(ob,pb){"use strict";var qb=q.getShortDisplay(ob)||'';if(pb.contextNode){z.setContent(pb.contextNode,qb);n.conditionClass(pb.node,"_52zj",qb);var rb=q.get(ob),sb=rb?rb.type:null;for(var tb in nb.CONTEXT_CLASSES){var ub=(tb===sb),vb=nb.CONTEXT_CLASSES[tb]||"_56x-";n.conditionClass(pb.contextNode,vb,ub);}}};nb.getSortedList=function(ob,pb){"use strict";var qb=ia.getList().filter(function(tb){return !(tb in ob)&&la.getFriendVisibility(tb)!==la.BLACKLISTED;}),rb=[];if(!y.isOnline()){Array.prototype.push.apply(rb,qb);}else{if(la.getOnlinePolicy()===la.ONLINE_TO_WHITELIST)qb=this._filterByWhitelist(qb);if(p.get('chat_web_ranking_with_presence')){Array.prototype.push.apply(rb,qb);}else rb=this._splitOutTopFriends(qb,pb);}rb=rb.slice(0,pb);if(rb.length===pb){var sb=nb.getAvailableList(rb.concat(ob)).length;sb&&rb.splice(-1);}if(!p.get('chat_web_ranking_with_presence'))rb.sort(v.sort);hb=rb.slice();return rb;};nb._filterByWhitelist=function(ob){"use strict";var pb=ob,qb={},rb,sb;ob=[];for(rb=0;rb<pb.length;++rb){sb=pb[rb];if(la.allows(sb)){qb[sb]=true;ob.push(sb);}}var tb=la.getWhitelist();for(rb=0;rb<tb.length;++rb){sb=tb[rb];if(!(sb in qb))ob.push(sb);}for(rb=0;rb<pb.length;++rb){sb=pb[rb];if(!la.allows(sb))ob.push(sb);}return ob;};nb._splitOutTopFriends=function(ob,pb){"use strict";var qb=[],rb=[],sb=p.get('ordered_list.top_friends',0),tb=p.get('ordered_list.top_mobile',0),ub=pb,vb=ob.length;for(var wb=0;wb<vb&&ub>0;wb++){var xb=ob[wb],yb=ma.get(xb),zb=yb===m.ACTIVE;if(zb||(yb===m.MOBILE&&wb<tb)||wb<sb){qb.push(xb);zb&&ub--;}else rb.push(xb);}if(wb<vb)Array.prototype.push.apply(rb,ob.slice(wb));if(qb.length<pb)Array.prototype.push.apply(qb,rb);return qb;};nb.getAvailableList=function(ob){"use strict";var pb;if(p.get('divebar_show_mobile_more_friends')||p.get('divebar_show_mobile_more_friends_alphabetical'))pb=l.getAvailableIDs();if(!pb)pb=l.getOnlineIDs();return pb.filter(function(qb){return !(qb in ob);});};nb._pause=function(){"use strict";ib=true;};nb._unpause=function(){"use strict";ib=false;};nb._registerToggleRenderItem=function(ob){"use strict";ba.listen(ob,'click',function(){ib=!ib;n.conditionClass(ob,'checked',ib);});};ua(nb,{CONTEXT_CLASSES:{nearby:"_56xw",visiting:"_56xx",neighbourhood:"_56xy",listening:"_56xz"}});e.exports=nb;});
__d("ChatTypeaheadBehavior",["Chat","ChatConfig","CSS","DOM","Parent","Rect","copyProperties","cx","tx"],function(a,b,c,d,e,f){var g=b('Chat'),h=b('ChatConfig'),i=b('CSS'),j=b('DOM'),k=b('Parent'),l=b('Rect'),m=b('copyProperties'),n=b('cx'),o=b('tx');function p(r,s){if(!h.get('litestand_classic_sidebar'))return;var t=k.byClass(r,"_4oes");if(t)i.conditionClass(t,"_5q83",s);}function q(r){"use strict";this._typeahead=r;}q.prototype.enable=function(){"use strict";var r=this._typeahead;this._subscriptions=[r.subscribe('focus',function(){r.getData().refreshData();p(r.getElement(),true);}),r.subscribe('blur',function(s){r.getCore().reset();p(r.getElement(),false);}),r.subscribe('respond',function(s,t){if(t.value&&t.value===r.getCore().getValue()){if(!t.results.length){var u=h.get('divebar_typeahead_group_fof',0);if(u&&!t.isAsync)return;var v=j.create('div',{className:'noResults'},"\u0414\u0440\u0443\u0433 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d.");j.setContent(r.getView().getElement(),v);}i.addClass(r.getElement(),'hasValue');}}),r.subscribe('reset',function(){i.removeClass(r.getElement(),'hasValue');}),r.subscribe('select',function(s,t){r.getView().hide();var u=i.hasClass(document.documentElement,'sidebarMode'),v={mode:u?'sidebar':'chatNub',source:'typeahead',type:t.selected.type,typeahead:true};g.openTab(t.selected.uid,t.selected.type,v);}),r.subscribe('highlight',function(s,t){if(t.index>=0){var u=r.getView().getItems()[t.index];if(u){var v=new l(u),w=u.offsetParent,x=v.boundWithin(new l(w)).getPositionVector();v.getPositionVector().sub(x).scrollElementBy(w);}}})];};q.prototype.disable=function(){"use strict";this._subscriptions.forEach(function(r){this._typeahead.unsubscribe(r);}.bind(this));this._subscriptions=null;};m(q.prototype,{_subscriptions:null});e.exports=q;});
__d("ChatTypeaheadCore",["Event","Keys","TypeaheadCore","copyProperties","emptyFunction","shield"],function(a,b,c,d,e,f){var g=b('Event'),h=b('Keys'),i=b('TypeaheadCore'),j=b('copyProperties'),k=b('emptyFunction'),l=b('shield');for(var m in i)if(i.hasOwnProperty(m))o[m]=i[m];var n=i===null?null:i.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=i;function o(){"use strict";if(i!==null)i.apply(this,arguments);}o.prototype.init=function(p,q,r){"use strict";n.init.call(this,p,q,r);this.informBeginActive=false;this.informEndActive=false;this.data.subscribe('respond',function(){if(this.informBeginActive){this.informBeginActive=false;this.inform('sidebar/typeahead/active',true);}else if(this.informEndActive){this.informEndActive=false;this.inform('sidebar/typeahead/active',false);}}.bind(this));};o.prototype.keydown=function(event){"use strict";var p=g.getKeyCode(event);if(p===h.ESC){setTimeout(l(this.reset,this),0);if(!this.getValue()){this.element.blur();this.inform('escape');}return event.kill();}return n.keydown.call(this,event);};o.prototype.checkValue=function(){"use strict";var p=this.getValue(),q=this.value;if(p==q)return;if(q&&!p){this.typeaheadActive=false;this.informEndActive=true;}else if(!q&&p){this.typeaheadActive=true;this.informBeginActive=true;this.inform('sidebar/typeahead/preActive');}n.checkValue.call(this);};j(o.prototype,{handleTab:k});e.exports=o;});
__d("ChatTypeaheadDataSource",["ChatSortUsers","CurrentUser","DataSource","JSLogger","MercuryParticipantTypes","Run","ShortProfiles"],function(a,b,c,d,e,f){var g=b('ChatSortUsers'),h=b('CurrentUser'),i=b('DataSource'),j=b('JSLogger'),k=b('MercuryParticipantTypes'),l=b('Run'),m=b('ShortProfiles');for(var n in i)if(i.hasOwnProperty(n))p[n]=i[n];var o=i===null?null:i.prototype;p.prototype=Object.create(o);p.prototype.constructor=p;p.__superConstructor__=i;function p(q){"use strict";q=q||{};q.kanaNormalization=true;i.call(this,q);this.persistOnRefresh=q.persistOnRefresh!==false;this.showOfflineUsers=!!q.showOfflineUsers;this._jslog=j.create('chat_typeahead');this._jslog.log('created');}p.prototype.init=function(){"use strict";this._jslog.log('init');o.init.call(this);this._update();};p.prototype.bootstrap=function(){"use strict";this._jslog.log('bootstrap');o.bootstrap.call(this);if(this.showOfflineUsers){this._jslog.log('show_offline_users');this._jslog.log('ensured_short_profiles');if(m.hasAll()){this._update();}else{this._jslog.log('fetch_all_short_profiles');m.fetchAll();this.inform('activity',{activity:true});var q=m.subscribe('updated',function(){this.inform('activity',{activity:false});this._update();}.bind(this));if(!this.persistOnRefresh)l.onLeave(function(){m.unsubscribe(q);});}}};p.prototype._update=function(){"use strict";d(['AvailableList'],function(q){var r=this.value;this.dirty();var s=m.getCachedProfileIDs(),t=s.filter(function(v){var w=m.getNow(v);return w.type===k.FRIEND;});t.sort(g.sort);var u=[];t.forEach(function(v){if(v==h.getID())return;var w=q.get(v);if(!this.showOfflineUsers&&w!==q.ACTIVE)return;var x=m.getNow(v),y=x.additionalName;if(x.hasOwnProperty('searchTokens'))y=y!==null?y+" "+x.searchTokens.join(" "):x.searchTokens.join(" ");u.push({uid:v,text:x.name,tokens:y,localized_text:x.name,additional_text:x.additionalName,photo:x.thumbSrc,type:x.type});}.bind(this));if(u.length)this.addEntries(u);this.value=r;if(r)this.query(r);}.bind(this));};p.prototype.refreshData=function(){"use strict";d(['AvailableList'],function(q){q.update();}.bind(this));};e.exports=p;});
__d("ChatSidebarHeader.react",["React","cx"],function(a,b,c,d,e,f){var g=b('React'),h=b('cx'),i=g.createClass({displayName:'ReactChatSidebarHeader',render:function(){return (g.DOM.div({className:"_55ob"},g.DOM.div({className:"_55oc"},this.props.name)));}});e.exports=i;});
__d("ChatSidebarUser.react",["WebMessengerPermalinkConstants","ChatConfig","React","ChatSidebarItem.react"],function(a,b,c,d,e,f){var g=b('WebMessengerPermalinkConstants'),h=b('ChatConfig'),i=b('React'),j=b('ChatSidebarItem.react'),k=i.createClass({displayName:'ChatSidebarUser',render:function(){var l=g.getURIPathForIDOrVanity(this.props.userID);return (j({href:{url:l},imageSize:this.props.imageSize,images:this.props.image,name:this.props.name,status:this.props.status,birthday:this.props.birthday,statusTime:this.props.statusTime,detailedStatus:this.props.detailedStatus,context:this.props.context}));}});e.exports=k;});
__d("ChatTypeaheadRenderer",["AvailableListConstants","ChatSidebarConstants","ChatSidebarHeader.react","ChatSidebarThread.react","ChatSidebarUser.react","ChatTypeaheadConstants","DOM","LastMobileActiveTimes","MercuryParticipants","PresenceStatus","React"],function(a,b,c,d,e,f){var g=b('AvailableListConstants'),h=b('ChatSidebarConstants'),i=b('ChatSidebarHeader.react'),j=b('ChatSidebarThread.react'),k=b('ChatSidebarUser.react'),l=b('ChatTypeaheadConstants'),m=b('DOM'),n=b('LastMobileActiveTimes'),o=b('MercuryParticipants'),p=b('PresenceStatus'),q=b('React'),r={};function s(x,y){if(!(x in r))r[x]=m.create('li');q.renderComponent(y,r[x]);return r[x];}function t(x){return s(x.text,i({name:x.text}));}function u(x){var y=x.mercury_thread.participants.map(function(z){return o.getUserID(z);});return s(x.uid,j({image:x.mercury_thread.image_src,imageSize:h.getImageSize(),name:x.mercury_thread.name,participants:x.participants_to_render,status:p.getGroup(y),threadID:x.uid}));}function v(x){var y=p.get(x.uid),z=(y===g.MOBILE)?n.getShortDisplay(x.uid):null,aa=(x.render_type==l.NON_FRIEND_TYPE||x.render_type==l.FB4C_TYPE)?x.subtext:null,ba=null;if(y===g.ACTIVE)ba=p.getDetailedActivePresence(x.uid);return s(x.uid,k({image:x.photo,imageSize:h.getImageSize(),name:x.text,status:y,birthday:p.isBirthday(x.uid),statusTime:z,detailedStatus:ba,userID:x.uid,context:aa}));}function w(x,y){if(x.type===l.HEADER_TYPE)return t(x);if(x.type==l.THREAD_TYPE)return u(x);return v(x);}e.exports=w;});
__d("ChatBehavior",["Arbiter","AvailableList","AvailableListConstants","ChatConfig","copyProperties","MercuryConstants","ChatSidebarCalloutData"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('AvailableList'),i=b('AvailableListConstants'),j=b('ChatConfig'),k=b('copyProperties'),l=b('MercuryConstants').ChatNotificationConstants,m=b('ChatSidebarCalloutData').isShown,n=h.getWebChatNotification(),o=m,p=true,q=k(new g(),{ON_CHANGED:'changed',notifiesUserMessages:function(){return n!==l.NO_USER_MESSAGE_NOTIFICATION;},ignoresRemoteTabRaise:function(){return o;},showsTabUnreadUI:function(){if(j.get('web_messenger_suppress_tab_unread'))return p;return true;}});function r(){q.inform(q.ON_CHANGED);}h.subscribe(i.ON_CHAT_NOTIFICATION_CHANGED,function(){var s=n,t=h.getWebChatNotification();n=t;if(s!=t)r();});g.subscribe('chat/set_does_page_occlude_tabs',function(s,t){o=!!t;r();});g.subscribe('chat/set_show_tab_unread_ui',function(s,t){p=!!t;r();});e.exports=q;});
__d("ChatSidebarSheet",["ArbiterMixin","BlackbirdUpsell","ChannelConnection","ChannelConstants","ChatBehavior","ChatConfig","ChatVisibility","CSS","DOM","Event","JSLogger","PresencePrivacy","React","XUIButton.react","copyProperties","csx","cx","fbt","mixin","tx"],function(a,b,c,d,e,f){var g=b('ArbiterMixin'),h=b('BlackbirdUpsell'),i=b('ChannelConnection'),j=b('ChannelConstants'),k=b('ChatBehavior'),l=b('ChatConfig'),m=b('ChatVisibility'),n=b('CSS'),o=b('DOM'),p=b('Event'),q=b('JSLogger'),r=b('PresencePrivacy'),s=b('React'),t=b('XUIButton.react'),u=b('copyProperties'),v=b('csx'),w=b('cx'),x=b('fbt'),y=b('mixin'),z=b('tx'),aa=q.create('sidebar_sheet');function ba(ha){switch(ha){case j.HINT_AUTH:return "\u0412\u0440\u0435\u043c\u044f \u0432\u0430\u0448\u0435\u0439 \u0441\u0435\u0441\u0441\u0438\u0438 \u0438\u0441\u0442\u0435\u043a\u043b\u043e. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u043d\u043e\u0432\u044c \u0432\u044b\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0445\u043e\u0434.";case j.HINT_CONN:return z._("{Chat} Facebook \u0432 \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d.",{Chat:"\u0427\u0430\u0442"});case j.HINT_MAINT:return z._("{Chat} Facebook \u0432 \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u0437\u0430\u043a\u0440\u044b\u0442 \u043d\u0430 \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u043e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u043d\u0438\u0435.",{Chat:"\u0427\u0430\u0442"});default:return z._("{Chat} Facebook \u0432 \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d.",{Chat:"\u0427\u0430\u0442"});}}function ca(ha){var ia;if(ha===null){ia="\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c\u0441\u044f \u043a \u0447\u0430\u0442\u0443. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0441\u0432\u043e\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043a \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u0443.";}else if(ha>l.get('warning_countdown_threshold_msec')){var ja=o.create('a',{href:'#',className:'fbChatReconnectLink'},"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u043f\u043e\u043f\u044b\u0442\u043a\u0443");ia=o.tx._("\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c\u0441\u044f \u043a \u0447\u0430\u0442\u0443. {try-again-link}",{'try-again-link':ja});}else if(ha>1000){ia=z._("\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c\u0441\u044f \u043a \u0447\u0430\u0442\u0443. \u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0441\u044f \u0447\u0435\u0440\u0435\u0437 {seconds} \u0441\u0435\u043a...",{seconds:Math.floor(ha/1000)});}else ia="\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u043f\u0440\u0438\u0441\u043e\u0435\u0434\u0438\u043d\u0438\u0442\u044c\u0441\u044f \u043a \u0447\u0430\u0442\u0443. \u041f\u043e\u0432\u0442\u043e\u0440\u043d\u043e\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435...";return ia;}var da=y(g);for(var ea in da)if(da.hasOwnProperty(ea))ga[ea]=da[ea];var fa=da===null?null:da.prototype;ga.prototype=Object.create(fa);ga.prototype.constructor=ga;ga.__superConstructor__=da;function ga(ha){"use strict";this._root=ha;this._litestandOffline=o.scry(ha,"._52d2");this._message=o.find(ha,'div.fbChatSidebarMessage div.message');i.subscribe([i.CONNECTED,i.SHUTDOWN,i.RECONNECTING],this._handleConnectionChange.bind(this));i.subscribe([i.MUTE_WARNING,i.UNMUTE_WARNING],this._render.bind(this));r.subscribe('privacy-user-presence-changed',this._render.bind(this));k.subscribe(k.ON_CHANGED,this._render.bind(this));this._render();}ga.prototype._handleConnectionChange=function(ha,ia){"use strict";this._channelStatus=ha;this._channelData=ia;this._render();};ga.prototype._renderChannelDisconnect=function(){"use strict";if(this._channelStatus===i.SHUTDOWN){return o.setContent(this._message,ba(this._channelData));}else if(this._channelStatus===i.RECONNECTING){var ha=this._channelData;o.setContent(this._message,ca(ha));if(ha>1000){if(ha>l.get('warning_countdown_threshold_msec'))this._warningMsgEventListener=p.listen(this._message,'click',function(event){if(n.hasClass(event.getTarget(),'fbChatReconnectLink')){i.reconnect();return false;}});this._showWarningTimeout=setTimeout(this._handleConnectionChange.bind(this,i.RECONNECTING,ha-1000),1000,false);}}};ga.prototype._renderOffline=function(){"use strict";if(this._isLitestand)return;if(this._litestandOffline&&this._litestandOffline.length)this._renderLitestandOffline();var ha='fbChatGoOnlineLink',ia="\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0427\u0430\u0442",ja=o.create('a',{href:'#',className:ha},ia),ka=o.tx._("{=Go online}, \u0447\u0442\u043e\u0431\u044b \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u043a\u0442\u043e \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u0441\u044f \u043e\u043d\u043b\u0430\u0439\u043d.",{'=Go online':ja});o.setContent(this._message,ka);this._goOnlineEventListener=p.listen(this._message,'click',function(event){if(n.hasClass(event.getTarget(),ha)){aa.log('sidebar_go_online');m.goOnline();return false;}});};ga.prototype._renderLitestandOffline=function(){"use strict";this._litestandOffline=this._litestandOffline[0];this._isLitestand=true;if(l.get('litestand_blended_sidebar')){s.renderComponent(t({className:"_52cx _5d9x",href:{url:'#'},label:"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0427\u0430\u0442",onClick:function(){aa.log('sidebar_go_online');m.goOnline();}}),this._litestandOffline);this._litestandOffline=null;}else{s.renderComponent(s.DOM.a({className:"_52cx _52i7",href:"#",onClick:function(){aa.log('sidebar_go_online');m.goOnline();}},s.DOM.i({className:"_52c_"}),s.DOM.div({className:"_52cz"},s.DOM.div({className:"_52c-"},s.DOM.i({className:"_52d1"}),s.DOM.div({className:"_52cy"},o.tx._("\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0427\u0430\u0442")))),s.DOM.i({className:"_52d0"}),s.DOM.div({className:"_4_vf",'data-hover':"tooltip",'data-tooltip-alignh':"center",'data-tooltip-position':"right",'aria-label':"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0427\u0430\u0442"})),this._litestandOffline);this._litestandOffline=null;}};ga.prototype._renderBlackbirdUpsell=function(){"use strict";o.setContent(this._message,h.getOfflineContent());};ga.prototype._renderBlackbird=function(ha){"use strict";o.setContent(this._message,h.getBlackbirdContent(ha));};ga.prototype._clear=function(){"use strict";if(this._showWarningTimeout){clearTimeout(this._showWarningTimeout);this._showWarningTimeout=null;}if(this._warningMsgEventListener){this._warningMsgEventListener.remove();this._warningMsgEventListener=null;}if(this._goOnlineEventListener){this._goOnlineEventListener.remove();this._goOnlineEventListener=null;}n.removeClass(this._root,'upsell');n.removeClass(this._root,'offline');n.removeClass(this._root,'blackbird');n.removeClass(this._root,'error');n.removeClass(this._root,'notice');o.empty(this._message);};ga.prototype._render=function(){"use strict";this._clear();if(h.shouldShow()){if(m.hasBlackbirdEnabled()){var ha=m.isOnline()?'blackbird':'upsell';n.addClass(this._root,ha);this._renderBlackbird(r.getVisibility());}else if(!m.isOnline()){n.addClass(this._root,'upsell');this._renderBlackbirdUpsell();}}else if(!m.isOnline()){n.addClass(this._root,'offline');this._renderOffline();}else if(i.disconnected()){n.addClass(this._root,'error');this._renderChannelDisconnect();}else if(!k.notifiesUserMessages()){n.addClass(this._root,'notice');var ia;if(l.get('litestand_blended_sidebar')){ia="\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u044b";}else ia="\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u044b \u043f\u043e\u043a\u0430 \u0432\u044b \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0435 \u0434\u0440\u0443\u0433\u043e\u0439 \u043a\u043b\u0438\u0435\u043d\u0442 \u0434\u043b\u044f \u0447\u0430\u0442\u0430.";o.setContent(this._message,ia);}this.inform('updated');};u(ga.prototype,{_channelStatus:null,_channelData:null,_showWarningTimeout:null,_warningMsgEventListener:null,_goOnlineEventListener:null});e.exports=ga;});
__d("FBDesktopPlugin",["CacheStorage","CurrentUser","DOM","FBDesktopDetect","Style","URI"],function(a,b,c,d,e,f){var g=b('CacheStorage'),h=b('CurrentUser'),i=b('DOM'),j=b('FBDesktopDetect'),k=b('Style'),l=b('URI'),m=new g('localstorage','_socialfox_'),n={_plugin:'_not_checked',arbiterInform:function(o,p){var q=JSON.stringify({name:o,payload:p});this._transmitCommand('arbiterinform',q);},bringToFront:function(){this._transmitCommand('bringtofront');},dock:function(){this._transmitCommand('dock');},getPlugin:function(){if(this._plugin==='_not_checked'){this._plugin=null;if(j.isPluginInstalled()){var o=i.create('object',{id:'kiwi_plugin',type:j.mimeType});k.set(o,'width',0);k.set(o,'height',0);var p=i.create('div',{},o);k.set(p,'width',0);k.set(p,'height',0);document.body.appendChild(p);this._plugin=o;}}return this._plugin;},getUserID:function(){var o=this.getPlugin();return o&&'getUserID' in o&&o.getUserID();},getVersion:function(){var o=this.getPlugin();return o&&'getVersion' in o&&o.getVersion();},isAppRunning:function(){var o=this.getPlugin();return o&&'isAppRunning' in o&&o.isAppRunning();},launchApp:function(){var o=this.getPlugin();return o&&'launchApp' in o&&o.launchApp();},login:function(o,p){if(p&&o&&o.length>0){var q=this.getPlugin();if(q){this._transmitCommand('relogin\n'+o+'\n'+p);return;}}},logout:function(o){o=o||"0";var p=this.getPlugin();if(p)p.logout(o);},recheck:function(){if(this._plugin===null)this._plugin='_not_checked';},shouldSuppressBeeper:function(){return this.isAppRunning();},shouldSuppressMessages:function(){if(m&&m.get('connected'))return true;var o=this.getUserID();if(o){return o===h.getID();}else return this.isAppRunning();},shouldSuppressSidebar:function(){var o=this.getPlugin(),p=o&&'isAppDocked' in o&&o.isAppDocked(),q=m&&m.get('active')==='true';return p||q;},transferAuthToken:function(o,p){if(o&&o.length>0){var q=this.getPlugin();if(q){q.setAccessToken(o,p);var r=setInterval(function(){q.setAccessToken(o,p);},500);setTimeout(function(){clearInterval(r);},10*1000);}}if(this.redirectHome)window.location.href=l().setPath().toString();},_transmitCommand:function(o,p){p=p||'';var q=this.getPlugin();if(q&&'transmitCommand' in q)q.transmitCommand(o,p);}};e.exports=n;});
__d("ChatSidebar",["ChatOrderedList","ChatTypeaheadBehavior","ChatTypeaheadCore","ChatTypeaheadDataSource","ChatTypeaheadRenderer","ChatTypeaheadView","Typeahead","Arbiter","ArbiterMixin","AsyncRequest","AsyncSignal","Bootloader","Chat","ChatConfig","ChatHovercard","ChatImpressionLogger","ChatOptions","ChatSidebarSheet","CSS","DOM","DOMDimensions","Env","Event","FBDesktopPlugin","JSLogger","JSXDOM","KeyEventController","OrderedFriendsList","Parent","PresencePrivacy","ScrollableArea","SidebarFitWindowHeight","Style","UserAgent","ViewportBounds","copyProperties","createArrayFrom","csx","cx","debounce","emptyFunction","ge"],function(a,b,c,d,e,f){b('ChatOrderedList');b('ChatTypeaheadBehavior');b('ChatTypeaheadCore');b('ChatTypeaheadDataSource');b('ChatTypeaheadRenderer');b('ChatTypeaheadView');b('Typeahead');var g=b('Arbiter'),h=b('ArbiterMixin'),i=b('AsyncRequest'),j=b('AsyncSignal'),k=b('Bootloader'),l=b('Chat'),m=b('ChatConfig'),n=b('ChatHovercard'),o=b('ChatImpressionLogger'),p=b('ChatOptions'),q=b('ChatSidebarSheet'),r=b('CSS'),s=b('DOM'),t=b('DOMDimensions'),u=b('Env'),v=b('Event'),w=b('FBDesktopPlugin'),x=b('JSLogger'),y=b('JSXDOM'),z=b('KeyEventController'),aa=b('OrderedFriendsList'),ba=b('Parent'),ca=b('PresencePrivacy'),da=b('ScrollableArea'),ea=b('SidebarFitWindowHeight'),fa=b('Style'),ga=b('UserAgent'),ha=b('ViewportBounds'),ia=b('copyProperties'),ja=b('createArrayFrom'),ka=b('csx'),la=b('cx'),ma=b('debounce'),na=b('emptyFunction'),oa=b('ge'),pa,qa=false,ra=false,sa=false,ta=false,ua=false,va=false,wa,xa,ya,za,ab,bb=null,cb,db,eb,fb,gb,hb,ib=28,jb=38,kb=x.create('chat_sidebar');function lb(){if(db)return;r.removeClass(document.documentElement,'sidebarMode');if(!ta||!ub.isVisible()){g.inform('reflow');return;}sa=false;bb=null;wa.hide();za.getCore().reset();r.hide(xa);kb.rate('sidebar_hide',ta);ub.inform('sidebar/hide',ub);g.inform('sidebar/hide',ub);g.inform('reflow');}function mb(){var vb=ub.shouldShowSidebar();r.conditionClass(document.documentElement,'sidebarCapable',vb);if(ub.isEnabled()&&vb){pb();var wb;if(cb){var xb=r.hasClass(xa,"_4w59");if(xb)return;hb=hb||s.find(xa,"._50g0");if(cb.has_favorites_editing)gb=gb||s.scry(xa,"._52s9")[0];wb=[hb];}else wb=ja(xa.childNodes);var yb=ob(wb),zb=wa.getItemHeight()||32,ac=wa.getPaddingOffset()||8,bc;if(db){if(db.isExpanded()){ac=ac+ib;if(cb&&cb.always_show_one_see_more)ac+=zb;}if(!l.isOnline())ac+=jb;var cc=Math.floor(wa.getItemPadding()/2);bc=Math.floor((yb-ac+cc)/zb);if(!wa.isVisible())fa.set(pa,'height',yb+'px');}else{bc=Math.floor((yb-ac)/(zb+1));fa.set(pa,'height',yb+'px');}wa.setNumTopFriends(bc);var dc=Math.floor((yb-ac)/zb);if(rb())dc=(dc-2)>0?dc-2:0;za.getData().setMaxResults(dc);ub.inform('sidebar/resized',ub);g.inform('sidebar/resized',ub);g.inform('reflow');}else lb();if(!ta){tb();ta=true;}bb=null;}function nb(){if(za&&ub.isVisible())za.getCore().getElement().focus();}function ob(vb){if(!vb)if(cb){hb=hb||s.find(xa,"._50g0");vb=[hb];}else vb=ja(xa.childNodes);var wb=ab.height;if(db&&eb)wb-=eb.getFullHeight();vb.forEach(function(xb){if(xb&&xb!==pa)wb-=t.getElementDimensions(xb).height;});if(fb)wb-=fb.getOffset();return Math.max(0,wb);}function pb(){if(ub.isVisible())return;sa=true;bb=null;r.show(xa);r.addClass(document.documentElement,'sidebarMode');wa.show();kb.rate('sidebar_show',ta);ub.inform('sidebar/show',ub);g.inform('sidebar/show',ub);}function qb(){p.setSetting('sidebar_mode',ub.isEnabled(),'sidebar');new i('/ajax/chat/settings.php').setHandler(na).setErrorHandler(na).setData({sidebar_mode:ub.isEnabled()}).setAllowCrossPageTransition(true).send();}function rb(){return m.get('divebar_typeahead_group_fof',0);}function sb(){return aa.getList().length<=m.get('sidebar.min_friends');}function tb(){var vb=true;if(!ub.isEnabled()){kb.log('state_not_enabled');vb=false;}if(!ub.isViewportCapable()){kb.log('state_not_shown_viewport');vb=false;}if(ra){kb.log('state_not_shown_hidden');vb=false;}if(sb()){kb.log('state_not_shown_num_friends');vb=false;}if(w.shouldSuppressSidebar()){kb.log('state_not_shown_fbdesktop');vb=false;}kb.log(vb?'state_shown':'state_not_shown');}var ub={init:function(vb,wb,xb,yb){ub.init=na;ua=true;xa=vb;wa=wb;za=xb;ya=yb;pa=s.find(vb,'div.fbChatSidebarBody');db=yb&&yb.ls_module;cb=yb&&yb.ls_config;if(db){g.subscribe('ViewportSizeChange',function(){g.inform('ChatOrderedList/itemHeightChange');mb();});g.subscribe('Sidebar/BookmarksHeightChange',mb);k.loadModules(['LitestandSidebarBookmarksDisplay'],function(cc){eb=cc;});}else v.listen(window,'resize',mb);z.registerKey('q',function(event){if(sa){var cc=null;if(hb){cc=s.scry(hb,'.inputsearch')[0];}else cc=s.scry(vb,'.inputsearch')[0];if(cc){cc.focus();event.prevent();}}});new n(wb);var zb=new q(vb);zb.subscribe('updated',mb);g.subscribe('sidebar/invalidate',mb);wb.setScrollContainer(ba.byClass(wb.getRoot(),'uiScrollableAreaWrap'));wb.subscribe(['render','show','hide'],ma(function(cc){if(cc==='render'&&!va){va=true;ub.inform('sidebar/chatRendered',null,g.BEHAVIOR_PERSISTENT);}var dc=wb.getRoot(),ec=da.getInstance(dc);ec&&ec.adjustGripper();}));wb.subscribe(['editStart','editEnd'],function(cc){r.conditionClass(za.getView().element,"_4-d6",cc=='editStart');});if(ga.firefox()>=17)v.listen(window,'storage',function(cc){if(cc.key=='_socialfox_active'&&cc.oldValue!=cc.newValue)mb();});g.subscribe('chat/option-changed',function(cc,dc){if(dc.name=="sidebar_mode"){qa=!!p.getSetting('sidebar_mode');mb();}});xb.getCore().subscribe('sidebar/typeahead/active',ub.updateOnActiveTypeahead);xb.subscribe('reset',function(){if(!xb.getCore().getValue()&&!wa.isVisible())ub.updateOnActiveTypeahead(null,false);});if(db){xb.getCore().subscribe('sidebar/typeahead/preActive',function(cc,dc){if(qa&&za.getView().isVisible()){g.inform(cc,dc);}else mb();});}else g.subscribe('buddylist-nub/initialized',function(cc,dc){v.listen(dc.getButton(),'click',function(event){var ec=ra;ra=false;ub.enable();var fc=ub.shouldShowSidebar();ra=ec&&!fc;return !fc;});});qa=!!p.getSetting('sidebar_mode');ga.ie()&&v.listen(vb,'click',function(cc){if(ba.byClass(cc.getTarget(),"_57du"))nb();});ca.subscribe('privacy-user-presence-changed',mb);mb();o.init(wa);if(!db)ha.addRight(ub.getVisibleWidth);ub.inform('sidebar/initialized',ub,g.BEHAVIOR_PERSISTENT);g.inform('sidebar/initialized',ub,g.BEHAVIOR_PERSISTENT);if(m.get('sidebar_below_bluebar')){var ac=s.find(vb,"._5qqe");fb=new ea(ac);fb.subscribe('resized',mb);}if(m.get('chat_sidebar_load_log')){var bc={loaded:true,session_token:yb.session_token,buddylist_short:m.get('buddylist_short_group'),bootloader_retry:u.bootloader_retry_on_timeout};new j('/ajax/chat/sidebar_load_log.php',bc).send();}},updateOnActiveTypeahead:function(vb,wb){if(!sa)return;if(wb){wa.hide();if(db){r.addClass(xa,"_5384");var xb=ob();if(gb)xb+=t.getElementDimensions(gb).height;fa.set(pa,'height',xb+'px');}}else{wa.show();if(db){fa.set(pa,'height','auto');r.removeClass(xa,"_5384");g.inform('sidebar/typeahead/active',false);mb();}else mb();}},isInitialized:function(){return ta;},disable:function(){if(!ub.isEnabled())return;qa=false;qb();lb();},enable:function(){if(ub.isEnabled())return;qa=true;qb();mb();setTimeout(nb,0);},forceEnsureLoaded:function(){if(ua)return;if(oa('pagelet_sidebar'))return;d(['UIPagelet'],function(vb){var wb=y.div({id:"pagelet_sidebar"});s.appendContent(document.body,wb);vb.loadFromEndpoint('SidebarPagelet','pagelet_sidebar');});ua=true;},ensureLoaded:function(){if(!qa)return;ub.forceEnsureLoaded();},hide:function(){if(ra)return;ra=true;lb();},unhide:function(){if(!ra)return;ra=false;mb();},getBody:function(){return pa;},getRoot:function(){return xa;},getVisibleWidth:function(){if(!sa||!xa)return 0;if(bb===null)bb=xa.offsetWidth;return bb;},isEnabled:function(){return qa;},isViewportCapable:function(){ab=t.getViewportWithoutScrollbarDimensions();if(db)return true;var vb=m.get('sidebar.minimum_width');return ab.width>vb;},shouldShowSidebar:function(){var vb=ub.isViewportCapable();return db||(vb&&!ra&&(!sb()||m.get('litestand_blended_sidebar',false))&&!w.shouldSuppressSidebar());},isVisible:function(){return sa;},resize:mb,toggle:function(){if(db){db.toggle();}else ub.isEnabled()?ub.disable():ub.enable();},isLitestandSidebar:function(){return !!db;}};ia(ub,h);e.exports=ub;});
__d("legacy:ChatTypeaheadBehavior",["ChatTypeaheadBehavior"],function(a,b,c,d){var e=b('ChatTypeaheadBehavior');if(!a.TypeaheadBehaviors)a.TypeaheadBehaviors={};a.TypeaheadBehaviors.chatTypeahead=function(f){f.enableBehavior(e);};},3);
__d("Dock",["Event","shield","WebMessengerWidthControl","Arbiter","ArbiterMixin","ChatQuietLinks","CSS","DataStore","DOM","Parent","Style","Toggler","Vector","copyProperties","csx","emptyFunction","ge"],function(a,b,c,d,e,f){var g=b('Event'),h=b('shield');b('WebMessengerWidthControl');var i=b('Arbiter'),j=b('ArbiterMixin'),k=b('ChatQuietLinks'),l=b('CSS'),m=b('DataStore'),n=b('DOM'),o=b('Parent'),p=b('Style'),q=b('Toggler'),r=b('Vector'),s=b('copyProperties'),t=b('csx'),u=b('emptyFunction'),v=b('ge');function w(){}s(w,j,{MIN_HEIGHT:140,INITIAL_FLYOUT_HEIGHT_OFFSET:10,init:function(x){this.init=u;this.rootEl=x;this.calculateViewportDimensions();this.calculateFlyoutHeightOffset();k.removeEmptyHrefs(this.rootEl);g.listen(x,'click',this._onClick.bind(this));g.listen(window,'resize',this._onWindowResize.bind(this));q.subscribe(['show','hide'],function(y,z){var aa=z.getActive();if(!n.contains(x,aa))return;if(l.hasClass(aa,'fbNub')){this.notifyNub(aa,y);if(y==='show')this._resizeNubFlyout(aa);}else{var ba=o.byClass(aa,'fbNubFlyout');if(ba)l.conditionClass(ba,'menuOpened',y==='show');}}.bind(this));this.inform('init',{},i.BEHAVIOR_PERSISTENT);},calculateViewportDimensions:function(){return (this.viewportDimensions=r.getViewportDimensions());},calculateFlyoutHeightOffset:function(){this.flyoutHeightOffset=this.INITIAL_FLYOUT_HEIGHT_OFFSET+r.getElementDimensions(this.rootEl).y;var x=v('blueBar');if(x){var y=p.isFixed(x)?'viewport':'document';this.flyoutHeightOffset+=r.getElementPosition(x,y).y+r.getElementDimensions(x).y;}},toggle:function(x){var y=this._findFlyout(x);if(!y)return;this.subscribe('init',function(){q.toggle(x);});},show:function(x){this.subscribe('init',function(){q.show(x);});},showNub:function(x){l.show(x);},hide:function(x){this.subscribe('init',function(){var y=q.getInstance(x);n.contains(x,y.getActive())&&y.hide();});},hideNub:function(x){l.hide(x);this.hide(x);},setUseMaxHeight:function(x,y){l.conditionClass(x,'maxHeight',y!==false);this._resizeNubFlyout(x);},_resizeNubFlyout:function(x){var y=this._findFlyout(x);if(!y||!(l.hasClass(x,'openToggler')||l.hasClass(x,'opened')))return;var z=n.find(y,'div.fbNubFlyoutOuter'),aa=n.find(z,'div.fbNubFlyoutInner'),ba=n.find(aa,'div.fbNubFlyoutBody'),ca=ba.scrollTop,da=ba.offsetHeight;p.set(ba,'height','auto');var ea=r.getElementDimensions(y),fa=r.getElementDimensions(ba),ga=this.getMaxFlyoutHeight(x);p.set(y,'max-height',ga+'px');p.set(z,'max-height',ga+'px');ea=r.getElementDimensions(y);var ha=r.getElementDimensions(aa),ia=ha.y-fa.y,ja=ea.y-ia,ka=parseInt(ba.style.height||ba.clientHeight,10),la=ja!==ka;if(ea.y>ia&&la)p.set(ba,'height',ja+'px');l.removeClass(y,'swapDirection');var ma=r.getElementPosition(y).x;l.conditionClass(y,'swapDirection',function(){if(ma<0)return true;return (ma+ea.x>this.viewportDimensions.x);}.bind(this)());if(la&&ca+da>=fa.y){ba.scrollTop=ba.scrollHeight;}else ba.scrollTop=ca;this.notifyNub(x,'resize');},getMaxFlyoutHeight:function(x){var y=this._findFlyout(x),z=r.getElementPosition(y,'viewport'),aa=r.getElementDimensions(y),ba=Math.max(this.MIN_HEIGHT,this.viewportDimensions.y-this.flyoutHeightOffset)-(this.viewportDimensions.y-z.y-aa.y);return Math.max(ba,0);},resizeAllFlyouts:function(){var x=this._getAllNubs(),y=x.length;while(y--)this._resizeNubFlyout(x[y]);},hideAllFlyouts:function(){var x=this._getAllNubs(),y=x.length;while(y--)this.hide(x[y]);},_getAllNubs:function(){var x=n.scry(this.rootEl,"div._50-v.openToggler");return x.concat(n.scry(this.rootEl,"div._50-v.opened"));},_onClick:function(event){var x=event.getTarget(),y=o.byClass(x,'fbNub');if(y){if(o.byClass(x,'fbNubFlyoutTitlebar')){var z=o.byTag(x,'a'),aa=x.nodeName=='INPUT'&&x.getAttribute('type')=='submit';if(!z&&!aa){this.hide(y);return false;}}this.notifyNub(y,'click');}},_onWindowResize:function(event){this.calculateViewportDimensions();this.resizeAllFlyouts();},_findFlyout:function(x){return l.hasClass(x,'fbNubFlyout')?x:n.scry(x,'div.fbNubFlyout')[0]||null;},registerNubController:function(x,y){m.set(x,'dock:nub:controller',y);y.subscribe('nub/button/content-changed',h(this.inform,this,'resize',x));y.subscribe('nub/flyout/content-changed',h(this._resizeNubFlyout,this,x));},unregisterNubController:function(x){m.remove(x,'dock:nub:controller');},notifyNub:function(x,y,z){var aa=m.get(x,'dock:nub:controller');aa&&aa.inform(y,z);}});e.exports=a.Dock||w;});
__d("NubController",["ArbiterMixin","Dock","copyProperties"],function(a,b,c,d,e,f){var g=b('ArbiterMixin'),h=b('Dock'),i=b('copyProperties');function j(){}i(j.prototype,g,{init:function(k){this.el=k;h.registerNubController(k,this);return this;},buttonContentChanged:function(){this.inform('nub/button/content-changed');},flyoutContentChanged:function(){this.inform('nub/flyout/content-changed');},hide:function(){h.hide(this.el);},show:function(){h.show(this.el);}});e.exports=j;});
__d("swfobject",["AsyncRequest","Bootloader","ControlledReferer","CSS","DOM","copyProperties","ge","htmlSpecialChars"],function(a,b,c,d,e,f){var g=b('AsyncRequest'),h=b('Bootloader'),i=b('ControlledReferer'),j=b('CSS'),k=b('DOM'),l=b('copyProperties'),m=b('ge'),n=b('htmlSpecialChars');if(typeof o=="undefined")var o={};if(typeof o.util=="undefined")o.util={};if(typeof o.SWFObjectUtil=="undefined")o.SWFObjectUtil={};o.SWFObject=function(u,v,w,x,y,z,aa,ba,ca,da){if(!document.getElementById)return;this.DETECT_KEY=da?da:'detectflash';this.skipDetect=o.util.getRequestParameter(this.DETECT_KEY);this.params={};this.variables={};this.attributes=[];this.fallback_html='';this.fallback_js_fcn=function(){};if(u)this.setAttribute('swf',u);if(v)this.setAttribute('id',v);if(w)this.setAttribute('width',w);if(x)this.setAttribute('height',x);this.installedVer=o.SWFObjectUtil.getPlayerVersion();if(y){if(!(y instanceof Array))y=[y];var ea;y.forEach(function(ha){ea=new o.PlayerVersion(ha.toString().split('.'));if(ea.major==this.installedVer.major){this.setAttribute('version',ea);return;}else if(!this.getAttribute('version')||ea.major<this.getAttribute('version').major)this.setAttribute('version',ea);}.bind(this));}if(!window.opera&&document.all&&this.installedVer.major>7)if(!o.unloadSet){o.SWFObjectUtil.prepUnload=function(){var ha=function(){},ia=function(){};window.attachEvent("onunload",o.SWFObjectUtil.cleanupSWFs);};window.attachEvent("onbeforeunload",o.SWFObjectUtil.prepUnload);o.unloadSet=true;}if(z)this.addParam('bgcolor',z);var fa=aa?aa:'high';this.addParam('quality',fa);this.setAttribute('useExpressInstall',false);this.setAttribute('doExpressInstall',false);var ga=(ba)?ba:window.location;this.setAttribute('xiRedirectUrl',ga);this.setAttribute('redirectUrl','');if(ca)this.setAttribute('redirectUrl',ca);this.setAttribute('useIframe',false);};o.SWFObject.ieWorkaroundApplied=false;o.SWFObject.ensureIEWorkaroundAttached=function(){if(!o.SWFObject.ieWorkaroundApplied&&document.attachEvent){o.SWFObject.ieWorkaroundApplied=true;document.attachEvent('onpropertychange',o.SWFObject.onDocumentPropertyChange);}};o.SWFObject.onDocumentPropertyChange=function(event){if(event.propertyName=="title"){var u=document.title;if(u!=null&&u.indexOf('#!')!=-1){u=u.substring(0,u.indexOf('#!'));document.title=u;}}};l(o.SWFObject.prototype,{useExpressInstall:function(u){this.xiSWFPath=!u?"/swf/expressinstall.swf":u;this.setAttribute('useExpressInstall',true);},setAttribute:function(u,v){this.attributes[u]=v;},getAttribute:function(u){return this.attributes[u]||"";},addParam:function(u,v){this.params[u]=v;},getParams:function(){return this.params;},addVariable:function(u,v){this.variables[u]=v;},getVariable:function(u){return this.variables[u]||"";},getVariables:function(){return this.variables;},getVariablePairs:function(){var u=[],v,w=this.getVariables();for(v in w)u[u.length]=v+"="+w[v];return u.join('&');},getSWFHTML:function(){var u,v,w;if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","PlugIn");this.setAttribute('swf',this.xiSWFPath);}v={type:'application/x-shockwave-flash',src:this.getAttribute('swf'),width:this.getAttribute('width'),height:this.getAttribute('height'),style:this.getAttribute('style')||'display: block;',id:this.getAttribute('id'),name:this.getAttribute('id')};var x=this.getParams();for(var y in x)v[y]=x[y];w=this.getVariablePairs();if(w)v.flashvars=w;u=t('embed',v,null);}else{if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","ActiveX");this.setAttribute('swf',this.xiSWFPath);}v={id:this.getAttribute('id'),classid:'clsid:D27CDB6E-AE6D-11cf-96B8-444553540000',width:this.getAttribute('width'),height:this.getAttribute('height'),style:this.getAttribute('style')||'display: block;'};var z=t('param',{name:'movie',value:this.getAttribute('swf')},null),x=this.getParams();for(var y in x)z+=t('param',{name:y,value:x[y]},null);w=this.getVariablePairs();if(w)z+=t('param',{name:'flashvars',value:w},null);u=t('object',v,z);}return u;},write:function(u){if(this.getAttribute('useExpressInstall')){var v=new o.PlayerVersion([6,0,65]);if(this.installedVer.versionIsValid(v)&&!this.installedVer.versionIsValid(this.getAttribute('version'))){this.setAttribute('doExpressInstall',true);this.addVariable("MMredirectURL",escape(this.getAttribute('xiRedirectUrl')));document.title=document.title.slice(0,47)+" - Flash Player Installation";this.addVariable("MMdoctitle",document.title);}}var w=(typeof u=='string')?document.getElementById(u):u;if(!w)return false;j.addClass(w,'swfObject');w.setAttribute('data-swfid',this.getAttribute('id'));if(this.skipDetect||this.getAttribute('doExpressInstall')||this.installedVer.versionIsValid(this.getAttribute('version'))){if(!this.getAttribute('useIframe')){o.SWFObject.ensureIEWorkaroundAttached();w.innerHTML=this.getSWFHTML();}else this._createIframe(w);return true;}else{if(this.getAttribute('redirectUrl')!="")document.location.replace(this.getAttribute('redirectUrl'));var x=this.getAttribute('version').major+'.'+this.getAttribute('version').minor+'.'+this.getAttribute('version').release+'.'+this.getAttribute('version').build,y=this.installedVer.major+'.'+this.installedVer.minor+'.'+this.installedVer.release+'.'+this.installedVer.build;this.fallback_js_fcn(y,x);w.innerHTML=this.fallback_html;}return false;},_createIframe:function(u){var v=k.create('iframe',{width:this.getAttribute('width'),height:this.getAttribute('height'),frameBorder:0});k.empty(u);u.appendChild(v);i.useFacebookRefererHtml(v,this.getSWFHTML(),this.getAttribute('iframeSource'));}});o.SWFObjectUtil.getPlayerVersion=function(){var u=new o.PlayerVersion([0,0,0,0]),v;if(navigator.plugins&&navigator.mimeTypes.length){for(var w=0;w<navigator.plugins.length;w++)try{var y=navigator.plugins[w];if(y.name=='Shockwave Flash'){v=new o.PlayerVersion(y.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+(r|d)|\s+b[0-9]+)/,".").split("."));if(typeof u=='undefined'||v.major>u.major||(v.major==u.major&&(v.minor>u.minor||(v.minor==u.minor&&(v.release>u.release||(v.release==u.release&&v.build>u.build))))))u=v;}}catch(x){}}else if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0){var z=1,aa=3;while(z)try{aa++;z=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+aa);u=new o.PlayerVersion([aa,0,0]);}catch(ba){z=null;}}else{try{var z=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");}catch(ca){try{var z=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");u=new o.PlayerVersion([6,0,21]);z.AllowScriptAccess="always";}catch(da){if(u.major==6)return u;}try{z=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}catch(ea){}}if(z!=null)u=new o.PlayerVersion(z.GetVariable("$version").split(" ")[1].split(","));}return u;};o.PlayerVersion=function(u){this.major=u[0]!=null?parseInt(u[0],10):0;this.minor=u[1]!=null?parseInt(u[1],10):0;this.release=u[2]!=null?parseInt(u[2],10):0;this.build=u[3]!=null?parseInt(u[3],10):0;};o.PlayerVersion.prototype.versionIsValid=function(u){if(this.major<u.major)return false;if(this.major>u.major)return true;if(this.minor<u.minor)return false;if(this.minor>u.minor)return true;if(this.release<u.release)return false;if(this.release>u.release)return true;if(this.build<u.build)return false;return true;};o.util={getRequestParameter:function(u){var v=document.location.search||document.location.hash;if(u==null)return v;if(v){var w=v.substring(1).split("&");for(var x=0;x<w.length;x++)if(w[x].substring(0,w[x].indexOf("="))==u)return w[x].substring((w[x].indexOf("=")+1));}return "";}};o.SWFObjectUtil.cleanupSWFs=function(){var u=document.getElementsByTagName("OBJECT");for(var v=u.length-1;v>=0;v--){u[v].style.display='none';for(var w in u[v])if(typeof u[v][w]=='function')u[v][w]=function(){};}};if(!document.getElementById&&document.all)document.getElementById=function(u){return document.all[u];};var p=o.util.getRequestParameter,q=o.SWFObject,r=o.SWFObject;o.spawn_flash_update_dialog=function(){new g().setURI('/ajax/flash_update_dialog.php').setMethod('GET').setReadOnly(true).send();};function s(u,v){var w=m(u),x=o.SWFObjectUtil.getPlayerVersion(),y;v.forEach(function(ba){ba=new o.PlayerVersion(ba.toString().split('.'));if(ba.major==x.major){y=ba;return;}else if(typeof y=='undefined'||ba.major<y.major)y=ba;}.bind(this));if(w&&x.major>0){var z=x.major+'.'+x.minor+'.'+x.release+'.'+x.build,aa=y.major+'.'+y.minor+'.'+y.release+'.'+y.build;k.setContent(w,k.tx._("Flash {required-version} \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u044d\u0442\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435. \u0412\u0430\u0448\u0430 \u0442\u0435\u043a\u0443\u0449\u0430\u044f \u0432\u0435\u0440\u0441\u0438\u044f {current-version}. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u044e\u044e \u0432\u0435\u0440\u0441\u0438\u044e Flash Player.",{'required-version':aa,'current-version':z}));}}o.showFlashErrorDialog=function(u,v){h.loadModules(['ErrorDialog'],function(w){w.show(u,v);});};function t(u,v,w){var x=/^[A-Za-z0-9\-]+$/;if(!u.match(x))throw new Error('Invalid tag '+u);var y='<'+u;for(var z in v){if(!z.match(x))throw new Error('Invalid attr '+z);y+=' '+z+'="'+n(v[z])+'"';}if(w===null){return y+'/>';}else return y+'>'+w+'</'+u+'>';}e.exports=a.deconcept||o;});
__d("swfobject2",[],function(a,b,c,d,e,f){var g=function(){var h="undefined",i="object",j="Shockwave Flash",k="ShockwaveFlash.ShockwaveFlash",l="application/x-shockwave-flash",m="SWFObjectExprInst",n="onreadystatechange",o=window,p=document,q=navigator,r=false,s=[ka],t=[],u=[],v=[],w,x,y,z,aa=false,ba=false,ca,da,ea=true,fa=function(){var eb=typeof p.getElementById!=h&&typeof p.getElementsByTagName!=h&&typeof p.createElement!=h,fb=q.userAgent.toLowerCase(),gb=q.platform.toLowerCase(),hb=gb?/win/.test(gb):/win/.test(fb),ib=gb?/mac/.test(gb):/mac/.test(fb),jb=/webkit/.test(fb)?parseFloat(fb.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,kb=!+"\v1",lb=[0,0,0],mb=null;if(typeof q.plugins!=h&&typeof q.plugins[j]==i){mb=q.plugins[j].description;if(mb&&!(typeof q.mimeTypes!=h&&q.mimeTypes[l]&&!q.mimeTypes[l].enabledPlugin)){r=true;kb=false;mb=mb.replace(/^.*\s+(\S+\s+\S+$)/,"$1");lb[0]=parseInt(mb.replace(/^(.*)\..*$/,"$1"),10);lb[1]=parseInt(mb.replace(/^.*\.(.*)\s.*$/,"$1"),10);lb[2]=/[a-zA-Z]/.test(mb)?parseInt(mb.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0;}}else if(typeof o.ActiveXObject!=h)try{var ob=new ActiveXObject(k);if(ob){mb=ob.GetVariable("$version");if(mb){kb=true;mb=mb.split(" ")[1].split(",");lb=[parseInt(mb[0],10),parseInt(mb[1],10),parseInt(mb[2],10)];}}}catch(nb){}return {w3:eb,pv:lb,wk:jb,ie:kb,win:hb,mac:ib};}(),ga=function(){if(!fa.w3)return;if((typeof p.readyState!=h&&p.readyState=="complete")||(typeof p.readyState==h&&(p.getElementsByTagName("body")[0]||p.body)))ha();if(!aa){if(typeof p.addEventListener!=h)p.addEventListener("DOMContentLoaded",ha,false);if(fa.ie&&fa.win){p.attachEvent(n,function(){if(p.readyState=="complete"){p.detachEvent(n,arguments.callee);ha();}});if(o==top)(function(){if(aa)return;try{p.documentElement.doScroll("left");}catch(eb){setTimeout(arguments.callee,0);return;}ha();})();}if(fa.wk)(function(){if(aa)return;if(!/loaded|complete/.test(p.readyState)){setTimeout(arguments.callee,0);return;}ha();})();ja(ha);}}();function ha(){if(aa)return;try{var fb=p.getElementsByTagName("body")[0].appendChild(xa("span"));fb.parentNode.removeChild(fb);}catch(eb){return;}aa=true;var gb=s.length;for(var hb=0;hb<gb;hb++)s[hb]();}function ia(eb){if(aa){eb();}else s[s.length]=eb;}function ja(eb){if(typeof o.addEventListener!=h){o.addEventListener("load",eb,false);}else if(typeof p.addEventListener!=h){p.addEventListener("load",eb,false);}else if(typeof o.attachEvent!=h){ya(o,"onload",eb);}else if(typeof o.onload=="function"){var fb=o.onload;o.onload=function(){fb();eb();};}else o.onload=eb;}function ka(){if(r){la();}else ma();}function la(){var eb=p.getElementsByTagName("body")[0],fb=xa(i);fb.setAttribute("type",l);fb.setAttribute('style','visibility: hidden; position: absolute; top: -1000px;');var gb=eb.appendChild(fb);if(gb){var hb=0;(function(){if(typeof gb.GetVariable!=h){var ib=gb.GetVariable("$version");if(ib){ib=ib.split(" ")[1].split(",");fa.pv=[parseInt(ib[0],10),parseInt(ib[1],10),parseInt(ib[2],10)];}}else if(hb<10){hb++;setTimeout(arguments.callee,10);return;}gb=null;ma();})();}else ma();}function ma(){var eb=t.length;if(eb>0)for(var fb=0;fb<eb;fb++){var gb=t[fb].id,hb=t[fb].callbackFn,ib={success:false,id:gb};if(fa.pv[0]>0){var jb=wa(gb);if(jb)if(za(t[fb].swfVersion)&&!(fa.wk&&fa.wk<312)){bb(gb,true);if(hb){ib.success=true;ib.ref=na(gb);hb(ib);}}else if(t[fb].expressInstall&&oa()){var kb={};kb.data=t[fb].expressInstall;kb.width=jb.getAttribute("width")||"0";kb.height=jb.getAttribute("height")||"0";if(jb.getAttribute("class"))kb.styleclass=jb.getAttribute("class");if(jb.getAttribute("align"))kb.align=jb.getAttribute("align");var lb={},mb=jb.getElementsByTagName("param"),nb=mb.length;for(var ob=0;ob<nb;ob++)if(mb[ob].getAttribute("name").toLowerCase()!="movie")lb[mb[ob].getAttribute("name")]=mb[ob].getAttribute("value");pa(kb,lb,gb,hb);}else{qa(jb);if(hb)hb(ib);}}else{bb(gb,true);if(hb){var pb=na(gb);if(pb&&typeof pb.SetVariable!=h){ib.success=true;ib.ref=pb;}hb(ib);}}}}function na(eb){var fb=null,gb=wa(eb);if(gb&&gb.nodeName=="OBJECT")if(typeof gb.SetVariable!=h){fb=gb;}else{var hb=gb.getElementsByTagName(i)[0];if(hb)fb=hb;}return fb;}function oa(){return !ba&&za("6.0.65")&&(fa.win||fa.mac)&&!(fa.wk&&fa.wk<312);}function pa(eb,fb,gb,hb){ba=true;y=hb||null;z={success:false,id:gb};var ib=wa(gb);if(ib){if(ib.nodeName=="OBJECT"){w=ra(ib);x=null;}else{w=ib;x=gb;}eb.id=m;if(typeof eb.width==h||(!/%$/.test(eb.width)&&parseInt(eb.width,10)<310))eb.width="310";if(typeof eb.height==h||(!/%$/.test(eb.height)&&parseInt(eb.height,10)<137))eb.height="137";p.title=p.title.slice(0,47)+" - Flash Player Installation";var jb=fa.ie&&fa.win?"ActiveX":"PlugIn",kb="MMredirectURL="+o.location.toString().replace(/&/g,"%26")+"&MMplayerType="+jb+"&MMdoctitle="+p.title;if(typeof fb.flashvars!=h){fb.flashvars+="&"+kb;}else fb.flashvars=kb;if(fa.ie&&fa.win&&ib.readyState!=4){var lb=xa("div");gb+="SWFObjectNew";lb.setAttribute("id",gb);ib.parentNode.insertBefore(lb,ib);ib.style.display="none";(function(){if(ib.readyState==4){ib.parentNode.removeChild(ib);}else setTimeout(arguments.callee,10);})();}sa(eb,fb,gb);}}function qa(eb){if(fa.ie&&fa.win&&eb.readyState!=4){var fb=xa("div");eb.parentNode.insertBefore(fb,eb);fb.parentNode.replaceChild(ra(eb),fb);eb.style.display="none";(function(){if(eb.readyState==4){eb.parentNode.removeChild(eb);}else setTimeout(arguments.callee,10);})();}else eb.parentNode.replaceChild(ra(eb),eb);}function ra(eb){var fb=xa("div");if(fa.win&&fa.ie){fb.innerHTML=eb.innerHTML;}else{var gb=eb.getElementsByTagName(i)[0];if(gb){var hb=gb.childNodes;if(hb){var ib=hb.length;for(var jb=0;jb<ib;jb++)if(!(hb[jb].nodeType==1&&hb[jb].nodeName=="PARAM")&&!(hb[jb].nodeType==8))fb.appendChild(hb[jb].cloneNode(true));}}}return fb;}function sa(eb,fb,gb){var hb,ib=wa(gb);if(fa.wk&&fa.wk<312)return hb;if(ib){if(typeof eb.id==h)eb.id=gb;if(fa.ie&&fa.win){var jb="";for(var kb in eb)if(eb[kb]!=Object.prototype[kb])if(kb.toLowerCase()=="data"){fb.movie=eb[kb];}else if(kb.toLowerCase()=="styleclass"){jb+=' class="'+eb[kb]+'"';}else if(kb.toLowerCase()!="classid")jb+=' '+kb+'="'+eb[kb]+'"';var lb="";for(var mb in fb)if(fb[mb]!=Object.prototype[mb])lb+='<param name="'+mb+'" value="'+fb[mb]+'" />';ib.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+jb+'>'+lb+'</object>';u[u.length]=eb.id;hb=wa(eb.id);}else{var nb=xa(i);nb.setAttribute("type",l);for(var ob in eb)if(eb[ob]!=Object.prototype[ob])if(ob.toLowerCase()=="styleclass"){nb.setAttribute("class",eb[ob]);}else if(ob.toLowerCase()!="classid")nb.setAttribute(ob,eb[ob]);for(var pb in fb)if(fb[pb]!=Object.prototype[pb]&&pb.toLowerCase()!="movie")ta(nb,pb,fb[pb]);ib.parentNode.replaceChild(nb,ib);hb=nb;}}return hb;}function ta(eb,fb,gb){var hb=xa("param");hb.setAttribute("name",fb);hb.setAttribute("value",gb);eb.appendChild(hb);}function ua(eb){var fb=wa(eb);if(fb&&fb.nodeName=="OBJECT")if(fa.ie&&fa.win){fb.style.display="none";(function(){if(fb.readyState==4){va(eb);}else setTimeout(arguments.callee,10);})();}else fb.parentNode.removeChild(fb);}function va(eb){var fb=wa(eb);if(fb){for(var gb in fb)if(typeof fb[gb]=="function")fb[gb]=null;fb.parentNode.removeChild(fb);}}function wa(eb){var fb=null;try{fb=p.getElementById(eb);}catch(gb){}return fb;}function xa(eb){return p.createElement(eb);}function ya(eb,fb,gb){eb.attachEvent(fb,gb);v[v.length]=[eb,fb,gb];}function za(eb){var fb=fa.pv,gb=eb.split(".");gb[0]=parseInt(gb[0],10);gb[1]=parseInt(gb[1],10)||0;gb[2]=parseInt(gb[2],10)||0;return (fb[0]>gb[0]||(fb[0]==gb[0]&&fb[1]>gb[1])||(fb[0]==gb[0]&&fb[1]==gb[1]&&fb[2]>=gb[2]))?true:false;}function ab(eb,fb,gb,hb){if(fa.ie&&fa.mac)return;var ib=p.getElementsByTagName("head")[0];if(!ib)return;var jb=(gb&&typeof gb=="string")?gb:"screen";if(hb){ca=null;da=null;}if(!ca||da!=jb){var kb=xa("style");kb.setAttribute("type","text/css");kb.setAttribute("media",jb);ca=ib.appendChild(kb);if(fa.ie&&fa.win&&typeof p.styleSheets!=h&&p.styleSheets.length>0)ca=p.styleSheets[p.styleSheets.length-1];da=jb;}if(fa.ie&&fa.win){if(ca&&typeof ca.addRule==i)ca.addRule(eb,fb);}else if(ca&&typeof p.createTextNode!=h)ca.appendChild(p.createTextNode(eb+" {"+fb+"}"));}function bb(eb,fb){if(!ea)return;var gb=fb?"visible":"hidden";if(aa&&wa(eb)){wa(eb).style.visibility=gb;}else ab("#"+eb,"visibility:"+gb);}function cb(eb){var fb=/[\\\"<>\.;]/,gb=fb.exec(eb)!=null;return gb&&typeof encodeURIComponent!=h?encodeURIComponent(eb):eb;}var db=function(){if(fa.ie&&fa.win)window.attachEvent("onunload",function(){var eb=v.length;for(var fb=0;fb<eb;fb++)v[fb][0].detachEvent(v[fb][1],v[fb][2]);var gb=u.length;for(var hb=0;hb<gb;hb++)ua(u[hb]);for(var ib in fa)fa[ib]=null;fa=null;for(var jb in g)g[jb]=null;g=null;});}();return {registerObject:function(eb,fb,gb,hb){if(fa.w3&&eb&&fb){var ib={};ib.id=eb;ib.swfVersion=fb;ib.expressInstall=gb;ib.callbackFn=hb;t[t.length]=ib;bb(eb,false);}else if(hb)hb({success:false,id:eb});},getObjectById:function(eb){if(fa.w3)return na(eb);},embedSWF:function(eb,fb,gb,hb,ib,jb,kb,lb,mb,nb){var ob={success:false,id:fb};if(fa.w3&&!(fa.wk&&fa.wk<312)&&eb&&fb&&gb&&hb&&ib){bb(fb,false);ia(function(){gb+="";hb+="";var pb={};if(mb&&typeof mb===i)for(var qb in mb)pb[qb]=mb[qb];pb.data=eb;pb.width=gb;pb.height=hb;var rb={};if(lb&&typeof lb===i)for(var sb in lb)rb[sb]=lb[sb];if(kb&&typeof kb===i)for(var tb in kb)if(typeof rb.flashvars!=h){rb.flashvars+="&"+tb+"="+kb[tb];}else rb.flashvars=tb+"="+kb[tb];if(za(ib)){var ub=sa(pb,rb,fb);if(pb.id==fb)bb(fb,true);ob.success=true;ob.ref=ub;}else if(jb&&oa()){pb.data=jb;pa(pb,rb,fb,nb);return;}else bb(fb,true);if(nb)nb(ob);});}else if(nb)nb(ob);},switchOffAutoHideShow:function(){ea=false;},ua:fa,getFlashPlayerVersion:function(){return {major:fa.pv[0],minor:fa.pv[1],release:fa.pv[2]};},hasFlashPlayerVersion:za,createSWF:function(eb,fb,gb){if(fa.w3){return sa(eb,fb,gb);}else return undefined;},showExpressInstall:function(eb,fb,gb,hb){if(fa.w3&&oa())pa(eb,fb,gb,hb);},removeSWF:function(eb){if(fa.w3)ua(eb);},createCSS:function(eb,fb,gb,hb){if(fa.w3)ab(eb,fb,gb,hb);},addDomLoadEvent:ia,addLoadEvent:ja,getQueryParamValue:function(eb){var fb=p.location.search||p.location.hash;if(fb){if(/\?/.test(fb))fb=fb.split("?")[1];if(eb==null)return cb(fb);var gb=fb.split("&");for(var hb=0;hb<gb.length;hb++)if(gb[hb].substring(0,gb[hb].indexOf("="))==eb)return cb(gb[hb].substring((gb[hb].indexOf("=")+1)));}return "";},expressInstallCallback:function(){if(ba){var eb=wa(m);if(eb&&w){eb.parentNode.replaceChild(w,eb);if(x){bb(x,true);if(fa.ie&&fa.win)w.style.display="block";}if(y)y(z);}ba=false;}}};}();e.exports=g;});
__d("SoundPlayer",["Arbiter","ChatConfig","swfobject","swfobject2","URI","createArrayFrom"],function(a,b,c,d,e,f){var g=b('Arbiter'),h=b('ChatConfig'),i=b('swfobject').SWFObject,j=b('swfobject2'),k=b('URI'),l=b('createArrayFrom'),m={},n=null,o=false,p='so_sound_player',q='/swf/SoundPlayer.swf?v=1',r='10.0.22.87',s=null,t=h.get('sound.useswfobject_2',false),u=h.get('sound.force_flash',false);function v(da){var ea=k(da);if(!ea.getDomain())return k().setPath(ea.getPath()).toString();return da;}function w(da){var ea=k(da).getPath();if(/\.mp3$/.test(ea))return 'audio/mpeg';if(/\.og[ga]$/.test(ea))return 'audio/ogg';return '';}function x(){if(!s&&!u){var da=document.createElement('audio');if(!da||!da.canPlayType)return null;da.setAttribute('preload','auto');document.body.appendChild(da);s=da;}return s;}function y(){var da=document[p]||window[p];if(da)if(!da.playSound&&da.length)da=da[0];return (da&&da.playSound&&da.loopSound)?da:null;}function z(){return o;}function aa(da,ea,fa){n={path:da,sync:ea,loop:fa};}function ba(){o=true;if(n){var da=y();if(n.loop){da.loopSound(n.path,n.sync);}else da.playSound(n.path,n.sync);}}var ca={init:function(da){da=l(da);var ea;for(var fa=0;fa<da.length;++fa){ea=da[fa];if(m[ea])return;}var ga=x();for(fa=0;ga&&fa<da.length;++fa){ea=da[fa];if(ga.canPlayType(ea)){m[ea]=true;return;}}m['audio/mpeg']=true;if(y())return;try{g.registerCallback(ba,['sound/player_ready','sound/ready']);var ia=document.createElement('div');ia.id='sound_player_holder';document.body.appendChild(ia);if(t){j.embedSWF(q,ia.id,'1px','1px',r,null,{swf_id:p},{allowscriptaccess:'always',wmode:'transparent'},null,function(ka){window[p]=ka.ref;g.inform('sound/player_ready');});}else{var ja=new i(q,p,'1px','1px',[r],'#ffffff');ja.addParam('allowscriptaccess','always');ja.addParam('wmode','transparent');ja.addVariable('swf_id',p);ja.fallback_html=' ';ja.write(ia.id);window[p]=ja;g.inform('sound/player_ready');}}catch(ha){}},play:function(da,ea){da=l(da);var fa=x(),ga,ha;for(var ia=0;fa&&ia<da.length;++ia){ga=da[ia];ha=w(ga);if(!fa.canPlayType(ha))continue;ca.init([ha]);fa.src=v(ga);if(ea){fa.setAttribute('loop','');}else fa.removeAttribute('loop');fa.play();return;}for(ia=0;ia<da.length;++ia){ga=v(da[ia]);ha=w(ga);if(ha!='audio/mpeg')continue;ca.init([ha]);var ja=y();if(!z()){aa(ga,true,ea);return;}else if(ja){if(ea){ja.loopSound(ga,true);}else ja.playSound(ga,true);return;}}},stop:function(da){da=l(da);for(var ea=0;ea<da.length;++ea){var fa=v(da[ea]),ga=x(),ha=y();if(ga&&ga.src==fa){ga.pause();ga.src=undefined;}else ha&&ha.stopSound(fa);}}};e.exports=ca;});
__d("SoundSynchronizer",["SoundPlayer","WebStorage","createArrayFrom"],function(a,b,c,d,e,f){var g=b('SoundPlayer'),h=b('WebStorage'),i=b('createArrayFrom'),j='fb_sounds_playing3';function k(){var o=h.getLocalStorage();if(o)try{var q=o[j];if(q){q=JSON.parse(q);if(Array.isArray(q))return q;}}catch(p){}return [];}function l(o){var p=h.getLocalStorage();if(p){var q=k();q.push(o);while(q.length>5)q.shift();try{p[j]=JSON.stringify(q);}catch(r){}}}function m(o){return k().some(function(p){return p===o;});}var n={play:function(o,p,q){o=i(o);p=p||(o[0]+Math.floor(Date.now()/1000));if(m(p))return;g.play(o,q);l(p);},isSupported:function(){return !!h.getLocalStorage();}};e.exports=n;});
__d("Sound",["SoundPlayer","SoundRPC","SoundSynchronizer","URI","UserAgent"],function(a,b,c,d,e,f){var g=b('SoundPlayer'),h=b('SoundRPC'),i=b('SoundSynchronizer'),j=b('URI'),k=b('UserAgent'),l=null,m={init:function(q){if(!l)g.init(q);},play:function(q,r,s){if(l){h.playRemote(l.contentWindow,q,r,false);}else h.playLocal(q,r,s);},stop:function(q){if(!l)g.stop(q);}},n=new j(location.href);if(n.getSubdomain()&&n.getSubdomain()!=='www')n.setSubdomain('www');var o=n.getDomain();function p(){if(k.ie()<9)return false;return i.isSupported()&&h.supportsRPC();}if(n.isFacebookURI()&&location.host!==o&&p()){l=document.createElement('iframe');l.setAttribute('src','//'+o+'/sound_iframe.php');l.style.display='none';document.body.appendChild(l);}e.exports=m;});